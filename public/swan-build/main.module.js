/*! For license information please see main.module.js.LICENSE.txt */
var e={487:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};e.exports=t},12:e=>{var t,r;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var r=[],n=0;n<e.length;n+=3)for(var o=e[n]<<16|e[n+1]<<8|e[n+2],a=0;a<4;a++)8*n+6*a<=8*e.length?r.push(t.charAt(o>>>6*(3-a)&63)):r.push("=");return r.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,o=0;n<e.length;o=++n%4)0!=o&&r.push((t.indexOf(e.charAt(n-1))&Math.pow(2,-2*o+8)-1)<<2*o|t.indexOf(e.charAt(n))>>>6-2*o);return r}},e.exports=r},738:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},568:(e,t,r)=>{var n,o,a,i,s;n=r(12),o=r(487).utf8,a=r(738),i=r(487).bin,(s=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?i.stringToBytes(e):o.stringToBytes(e):a(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var r=n.bytesToWords(e),c=8*e.length,u=1732584193,l=-271733879,f=-1732584194,h=271733878,p=0;p<r.length;p++)r[p]=16711935&(r[p]<<8|r[p]>>>24)|4278255360&(r[p]<<24|r[p]>>>8);r[c>>>5]|=128<<c%32,r[14+(c+64>>>9<<4)]=c;var v=s._ff,d=s._gg,m=s._hh,g=s._ii;for(p=0;p<r.length;p+=16){var y=u,b=l,x=f,w=h;u=v(u,l,f,h,r[p+0],7,-680876936),h=v(h,u,l,f,r[p+1],12,-389564586),f=v(f,h,u,l,r[p+2],17,606105819),l=v(l,f,h,u,r[p+3],22,-1044525330),u=v(u,l,f,h,r[p+4],7,-176418897),h=v(h,u,l,f,r[p+5],12,1200080426),f=v(f,h,u,l,r[p+6],17,-1473231341),l=v(l,f,h,u,r[p+7],22,-45705983),u=v(u,l,f,h,r[p+8],7,1770035416),h=v(h,u,l,f,r[p+9],12,-1958414417),f=v(f,h,u,l,r[p+10],17,-42063),l=v(l,f,h,u,r[p+11],22,-1990404162),u=v(u,l,f,h,r[p+12],7,1804603682),h=v(h,u,l,f,r[p+13],12,-40341101),f=v(f,h,u,l,r[p+14],17,-1502002290),u=d(u,l=v(l,f,h,u,r[p+15],22,1236535329),f,h,r[p+1],5,-165796510),h=d(h,u,l,f,r[p+6],9,-1069501632),f=d(f,h,u,l,r[p+11],14,643717713),l=d(l,f,h,u,r[p+0],20,-373897302),u=d(u,l,f,h,r[p+5],5,-701558691),h=d(h,u,l,f,r[p+10],9,38016083),f=d(f,h,u,l,r[p+15],14,-660478335),l=d(l,f,h,u,r[p+4],20,-405537848),u=d(u,l,f,h,r[p+9],5,568446438),h=d(h,u,l,f,r[p+14],9,-1019803690),f=d(f,h,u,l,r[p+3],14,-187363961),l=d(l,f,h,u,r[p+8],20,1163531501),u=d(u,l,f,h,r[p+13],5,-1444681467),h=d(h,u,l,f,r[p+2],9,-51403784),f=d(f,h,u,l,r[p+7],14,1735328473),u=m(u,l=d(l,f,h,u,r[p+12],20,-1926607734),f,h,r[p+5],4,-378558),h=m(h,u,l,f,r[p+8],11,-2022574463),f=m(f,h,u,l,r[p+11],16,1839030562),l=m(l,f,h,u,r[p+14],23,-35309556),u=m(u,l,f,h,r[p+1],4,-1530992060),h=m(h,u,l,f,r[p+4],11,1272893353),f=m(f,h,u,l,r[p+7],16,-155497632),l=m(l,f,h,u,r[p+10],23,-1094730640),u=m(u,l,f,h,r[p+13],4,681279174),h=m(h,u,l,f,r[p+0],11,-358537222),f=m(f,h,u,l,r[p+3],16,-722521979),l=m(l,f,h,u,r[p+6],23,76029189),u=m(u,l,f,h,r[p+9],4,-640364487),h=m(h,u,l,f,r[p+12],11,-421815835),f=m(f,h,u,l,r[p+15],16,530742520),u=g(u,l=m(l,f,h,u,r[p+2],23,-995338651),f,h,r[p+0],6,-198630844),h=g(h,u,l,f,r[p+7],10,1126891415),f=g(f,h,u,l,r[p+14],15,-1416354905),l=g(l,f,h,u,r[p+5],21,-57434055),u=g(u,l,f,h,r[p+12],6,1700485571),h=g(h,u,l,f,r[p+3],10,-1894986606),f=g(f,h,u,l,r[p+10],15,-1051523),l=g(l,f,h,u,r[p+1],21,-2054922799),u=g(u,l,f,h,r[p+8],6,1873313359),h=g(h,u,l,f,r[p+15],10,-30611744),f=g(f,h,u,l,r[p+6],15,-1560198380),l=g(l,f,h,u,r[p+13],21,1309151649),u=g(u,l,f,h,r[p+4],6,-145523070),h=g(h,u,l,f,r[p+11],10,-1120210379),f=g(f,h,u,l,r[p+2],15,718787259),l=g(l,f,h,u,r[p+9],21,-343485551),u=u+y>>>0,l=l+b>>>0,f=f+x>>>0,h=h+w>>>0}return n.endian([u,l,f,h])})._ff=function(e,t,r,n,o,a,i){var s=e+(t&r|~t&n)+(o>>>0)+i;return(s<<a|s>>>32-a)+t},s._gg=function(e,t,r,n,o,a,i){var s=e+(t&n|r&~n)+(o>>>0)+i;return(s<<a|s>>>32-a)+t},s._hh=function(e,t,r,n,o,a,i){var s=e+(t^r^n)+(o>>>0)+i;return(s<<a|s>>>32-a)+t},s._ii=function(e,t,r,n,o,a,i){var s=e+(r^(t|~n))+(o>>>0)+i;return(s<<a|s>>>32-a)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var r=n.wordsToBytes(s(e,t));return t&&t.asBytes?r:t&&t.asString?i.bytesToString(r):n.bytesToHex(r)}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n={};(()=>{r.d(n,{pJ:()=>He,r_:()=>Ve,dm:()=>je});var e=window.Globals.zustand,t=e.create,o=(e.useStore,e.createStore,t((function(e){return{baseURL:"",setBaseURL:function(t){var r=t.baseURL;"/"===r[r.length-1]&&r.slice(0,r.length-1),e({baseURL:r})},openOverlay:!1,text:"Click Box"}}))),a=window.Globals.react,i=(a.Children,a.Component,a.Fragment,a.Profiler,a.PureComponent,a.StrictMode,a.Suspense,a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,a.cloneElement,a.createContext,a.createElement,a.createFactory,a.createRef,a.forwardRef,a.isValidElement,a.lazy,a.memo,a.startTransition,a.unstable_act,a.useCallback,a.useContext,a.useDebugValue,a.useDeferredValue,a.useEffect),s=(a.useId,a.useImperativeHandle,a.useInsertionEffect,a.useLayoutEffect,a.useMemo,a.useReducer,a.useRef),c=a.useState,u=(a.useSyncExternalStore,a.useTransition,a.version,window.Globals["@react-three/drei"]),l=(u.AccumulativeShadows,u.AdaptiveDpr,u.AdaptiveEvents,u.ArcballControls,u.AsciiRenderer,u.BBAnchor,u.Backdrop,u.BakeShadows,u.Billboard,u.Bounds,u.Box,u.Bvh,u.CameraControls,u.CameraShake,u.Capsule,u.CatmullRomLine,u.Caustics,u.Center),f=(u.Circle,u.Clone,u.Cloud,u.ComputedAttribute,u.Cone,u.ContactShadows,u.CubeCamera,u.CubicBezierLine,u.CurveModifier,u.CycleRaycast,u.Cylinder,u.Decal,u.Detailed,u.DeviceOrientationControls,u.Dodecahedron,u.Edges,u.Effects,u.Environment,u.EnvironmentCube,u.EnvironmentMap,u.EnvironmentPortal,u.Example,u.Extrude,u.FaceControls,u.FaceLandmarker,u.FaceLandmarkerDefaults,u.Facemesh,u.FacemeshDatas,u.FacemeshEye,u.FacemeshEyeDefaults,u.FirstPersonControls,u.Float,u.FlyControls,u.GizmoHelper,u.GizmoViewcube,u.GizmoViewport,u.Gltf,u.GradientTexture,u.GradientType,u.Grid,u.Html,u.Hud,u.Icosahedron,u.Image,u.Instance,u.Instances,u.IsObject,u.KeyboardControls,u.Lathe,u.Lightformer,u.Line,u.Loader,u.MapControls,u.MarchingCube,u.MarchingCubes,u.MarchingPlane,u.Mask,u.Merged,u.MeshDiscardMaterial,u.MeshDistortMaterial,u.MeshPortalMaterial,u.MeshReflectorMaterial,u.MeshRefractionMaterial,u.MeshTransmissionMaterial),h=(u.MeshWobbleMaterial,u.Octahedron,u.OrbitControls,u.OrthographicCamera,u.PerformanceMonitor,u.PerspectiveCamera,u.PivotControls,u.Plane,u.Point,u.PointMaterial,u.PointMaterialImpl,u.PointerLockControls,u.Points,u.PointsBuffer,u.Polyhedron,u.PositionPoint,u.PositionalAudio,u.Preload,u.PresentationControls,u.QuadraticBezierLine,u.RandomizedLight,u.Reflector,u.RenderTexture,u.Resize,u.Ring,u.RoundedBox,u.Sampler,u.ScreenQuad,u.ScreenSpace,u.Scroll,u.ScrollControls,u.Segment,u.SegmentObject,u.Segments,u.Select,u.Shadow,u.Shape,u.Sky,u.SoftShadows,u.Sparkles,u.Sphere),p=(u.SpotLight,u.SpotLightShadow,u.SpriteAnimator,u.Stage,u.Stars,u.Stats,u.StatsGl,u.Svg,u.Tetrahedron,u.Text,u.Text3D),v=(u.Torus,u.TorusKnot,u.TrackballControls,u.Trail,u.TransformControls,u.Tube,u.View,u.Wireframe,u.accumulativeContext,u.calcPosFromAngles,u.calculateScaleFactor,u.isWebGL2Available,u.meshBounds,u.shaderMaterial,u.useAnimations,u.useAspect,u.useBVH,u.useBounds,u.useBoxProjectedEnv,u.useCamera,u.useContextBridge,u.useCubeCamera,u.useCubeTexture,u.useCursor,u.useDepthBuffer,u.useDetectGPU,u.useEnvironment,u.useFBO,u.useFBX,u.useFaceControls,u.useFaceLandmarker,u.useFont,u.useGLTF),d=(u.useGizmoContext,u.useHelper,u.useIntersect,u.useKTX2,u.useKeyboardControls,u.useMask,u.useMatcapTexture,u.useNormalTexture,u.usePerformanceMonitor,u.useProgress,u.useScroll,u.useSelect,u.useSurfaceSampler,u.useTexture,u.useTrail,u.useTrailTexture,u.useVideoTexture,window.Globals.three),m=(d.ACESFilmicToneMapping,d.AddEquation,d.AddOperation,d.AdditiveAnimationBlendMode,d.AdditiveBlending,d.AlphaFormat,d.AlwaysCompare,d.AlwaysDepth,d.AlwaysStencilFunc,d.AmbientLight,d.AmbientLightProbe,d.AnimationAction,d.AnimationClip,d.AnimationLoader,d.AnimationMixer,d.AnimationObjectGroup,d.AnimationUtils,d.ArcCurve,d.ArrayCamera,d.ArrowHelper,d.Audio,d.AudioAnalyser,d.AudioContext,d.AudioListener,d.AudioLoader,d.AxesHelper,d.BackSide,d.BasicDepthPacking,d.BasicShadowMap,d.Bone,d.BooleanKeyframeTrack,d.Box2,d.Box3),g=(d.Box3Helper,d.BoxGeometry,d.BoxHelper,d.BufferAttribute),y=d.BufferGeometry,b=(d.BufferGeometryLoader,d.ByteType,d.Cache,d.Camera),x=(d.CameraHelper,d.CanvasTexture,d.CapsuleGeometry,d.CatmullRomCurve3,d.CineonToneMapping,d.CircleGeometry,d.ClampToEdgeWrapping),w=d.Clock,T=d.Color,S=(d.ColorKeyframeTrack,d.ColorManagement,d.CompressedArrayTexture,d.CompressedCubeTexture,d.CompressedTexture,d.CompressedTextureLoader,d.ConeGeometry,d.CubeCamera,d.CubeReflectionMapping,d.CubeRefractionMapping,d.CubeTexture,d.CubeTextureLoader,d.CubeUVReflectionMapping,d.CubicBezierCurve,d.CubicBezierCurve3,d.CubicInterpolant,d.CullFaceBack,d.CullFaceFront,d.CullFaceFrontBack,d.CullFaceNone,d.Curve,d.CurvePath,d.CustomBlending,d.CustomToneMapping,d.CylinderGeometry),C=(d.Cylindrical,d.Data3DTexture,d.DataArrayTexture,d.DataTexture),E=(d.DataTextureLoader,d.DataUtils,d.DecrementStencilOp,d.DecrementWrapStencilOp,d.DefaultLoadingManager,d.DepthFormat,d.DepthStencilFormat,d.DepthTexture,d.DirectionalLight,d.DirectionalLightHelper,d.DiscreteInterpolant,d.DisplayP3ColorSpace,d.DodecahedronGeometry,d.DoubleSide,d.DstAlphaFactor,d.DstColorFactor,d.DynamicCopyUsage,d.DynamicDrawUsage,d.DynamicReadUsage,d.EdgesGeometry,d.EllipseCurve,d.EqualCompare,d.EqualDepth,d.EqualStencilFunc,d.EquirectangularReflectionMapping,d.EquirectangularRefractionMapping,d.Euler,d.EventDispatcher),L=(d.ExtrudeGeometry,d.FileLoader,d.Float16BufferAttribute,d.Float32BufferAttribute),A=(d.Float64BufferAttribute,d.FloatType),_=(d.Fog,d.FogExp2,d.FramebufferTexture,d.FrontSide),P=(d.Frustum,d.GLBufferAttribute,d.GLSL1,d.GLSL3,d.GreaterCompare,d.GreaterDepth,d.GreaterEqualCompare,d.GreaterEqualDepth,d.GreaterEqualStencilFunc,d.GreaterStencilFunc,d.GridHelper,d.Group,d.HalfFloatType,d.HemisphereLight,d.HemisphereLightHelper,d.HemisphereLightProbe,d.IcosahedronGeometry),F=(d.ImageBitmapLoader,d.ImageLoader,d.ImageUtils,d.IncrementStencilOp,d.IncrementWrapStencilOp,d.InstancedBufferAttribute),R=d.InstancedBufferGeometry,N=(d.InstancedInterleavedBuffer,d.InstancedMesh,d.Int16BufferAttribute,d.Int32BufferAttribute,d.Int8BufferAttribute,d.IntType,d.InterleavedBuffer,d.InterleavedBufferAttribute,d.Interpolant,d.InterpolateDiscrete,d.InterpolateLinear,d.InterpolateSmooth,d.InvertStencilOp,d.KeepStencilOp,d.KeyframeTrack,d.LOD,d.LatheGeometry,d.Layers,d.LessCompare,d.LessDepth,d.LessEqualCompare,d.LessEqualDepth,d.LessEqualStencilFunc,d.LessStencilFunc,d.Light,d.LightProbe,d.Line,d.Line3,d.LineBasicMaterial,d.LineCurve,d.LineCurve3,d.LineDashedMaterial,d.LineLoop,d.LineSegments,d.LinearEncoding,d.LinearFilter,d.LinearInterpolant,d.LinearMipMapLinearFilter,d.LinearMipMapNearestFilter,d.LinearMipmapLinearFilter,d.LinearMipmapNearestFilter,d.LinearSRGBColorSpace,d.LinearToneMapping,d.Loader,d.LoaderUtils,d.LoadingManager,d.LoopOnce,d.LoopPingPong,d.LoopRepeat,d.LuminanceAlphaFormat,d.LuminanceFormat,d.MOUSE,d.Material,d.MaterialLoader,d.MathUtils),k=d.Matrix3,B=d.Matrix4,M=(d.MaxEquation,d.Mesh),G=(d.MeshBasicMaterial,d.MeshDepthMaterial,d.MeshDistanceMaterial,d.MeshLambertMaterial,d.MeshMatcapMaterial,d.MeshNormalMaterial,d.MeshPhongMaterial,d.MeshPhysicalMaterial),D=d.MeshStandardMaterial,I=(d.MeshToonMaterial,d.MinEquation,d.MirroredRepeatWrapping,d.MixOperation,d.MultiplyBlending,d.MultiplyOperation,d.NearestFilter),O=(d.NearestMipMapLinearFilter,d.NearestMipMapNearestFilter,d.NearestMipmapLinearFilter,d.NearestMipmapNearestFilter,d.NeverCompare,d.NeverDepth,d.NeverStencilFunc,d.NoBlending,d.NoColorSpace,d.NoToneMapping,d.NormalAnimationBlendMode,d.NormalBlending,d.NotEqualCompare,d.NotEqualDepth,d.NotEqualStencilFunc,d.NumberKeyframeTrack,d.Object3D),U=(d.ObjectLoader,d.ObjectSpaceNormalMap,d.OctahedronGeometry,d.OneFactor,d.OneMinusDstAlphaFactor,d.OneMinusDstColorFactor,d.OneMinusSrcAlphaFactor,d.OneMinusSrcColorFactor,d.OrthographicCamera,d.PCFShadowMap,d.PCFSoftShadowMap,d.PMREMGenerator,d.Path,d.PerspectiveCamera,d.Plane,d.PlaneGeometry),z=(d.PlaneHelper,d.PointLight,d.PointLightHelper,d.Points,d.PointsMaterial,d.PolarGridHelper,d.PolyhedronGeometry,d.PositionalAudio,d.PropertyBinding,d.PropertyMixer,d.QuadraticBezierCurve,d.QuadraticBezierCurve3,d.Quaternion,d.QuaternionKeyframeTrack,d.QuaternionLinearInterpolant,d.RED_GREEN_RGTC2_Format,d.RED_RGTC1_Format,d.REVISION,d.RGBADepthPacking,d.RGBAFormat),j=(d.RGBAIntegerFormat,d.RGBA_ASTC_10x10_Format,d.RGBA_ASTC_10x5_Format,d.RGBA_ASTC_10x6_Format,d.RGBA_ASTC_10x8_Format,d.RGBA_ASTC_12x10_Format,d.RGBA_ASTC_12x12_Format,d.RGBA_ASTC_4x4_Format,d.RGBA_ASTC_5x4_Format,d.RGBA_ASTC_5x5_Format,d.RGBA_ASTC_6x5_Format,d.RGBA_ASTC_6x6_Format,d.RGBA_ASTC_8x5_Format,d.RGBA_ASTC_8x6_Format,d.RGBA_ASTC_8x8_Format,d.RGBA_BPTC_Format,d.RGBA_ETC2_EAC_Format,d.RGBA_PVRTC_2BPPV1_Format,d.RGBA_PVRTC_4BPPV1_Format,d.RGBA_S3TC_DXT1_Format,d.RGBA_S3TC_DXT3_Format,d.RGBA_S3TC_DXT5_Format,d.RGB_ETC1_Format,d.RGB_ETC2_Format,d.RGB_PVRTC_2BPPV1_Format,d.RGB_PVRTC_4BPPV1_Format,d.RGB_S3TC_DXT1_Format,d.RGFormat,d.RGIntegerFormat,d.RawShaderMaterial),H=(d.Ray,d.Raycaster,d.RectAreaLight,d.RedFormat,d.RedIntegerFormat,d.ReinhardToneMapping,d.RenderTarget,d.RepeatWrapping),V=(d.ReplaceStencilOp,d.ReverseSubtractEquation,d.RingGeometry,d.SIGNED_RED_GREEN_RGTC2_Format,d.SIGNED_RED_RGTC1_Format,d.SRGBColorSpace,d.Scene),W=(d.ShaderChunk,d.ShaderLib,d.ShaderMaterial,d.ShadowMaterial,d.Shape,d.ShapeGeometry,d.ShapePath,d.ShapeUtils,d.ShortType,d.Skeleton,d.SkeletonHelper,d.SkinnedMesh,d.Source,d.Sphere),X=(d.SphereGeometry,d.Spherical,d.SphericalHarmonics3,d.SplineCurve,d.SpotLight,d.SpotLightHelper,d.Sprite,d.SpriteMaterial,d.SrcAlphaFactor,d.SrcAlphaSaturateFactor,d.SrcColorFactor,d.StaticCopyUsage,d.StaticDrawUsage,d.StaticReadUsage,d.StereoCamera,d.StreamCopyUsage,d.StreamDrawUsage,d.StreamReadUsage,d.StringKeyframeTrack,d.SubtractEquation,d.SubtractiveBlending,d.TOUCH,d.TangentSpaceNormalMap,d.TetrahedronGeometry,d.Texture,d.TextureLoader,d.TorusGeometry,d.TorusKnotGeometry,d.Triangle,d.TriangleFanDrawMode,d.TriangleStripDrawMode,d.TrianglesDrawMode,d.TubeGeometry,d.TwoPassDoubleSide,d.UVMapping,d.Uint16BufferAttribute,d.Uint32BufferAttribute,d.Uint8BufferAttribute,d.Uint8ClampedBufferAttribute,d.Uniform,d.UniformsGroup,d.UniformsLib,d.UniformsUtils,d.UnsignedByteType,d.UnsignedInt248Type,d.UnsignedIntType,d.UnsignedShort4444Type,d.UnsignedShort5551Type,d.UnsignedShortType,d.VSMShadowMap,d.Vector2),q=d.Vector3,Y=(d.Vector4,d.VectorKeyframeTrack,d.VideoTexture,d.WebGL1Renderer,d.WebGL3DRenderTarget,d.WebGLArrayRenderTarget,d.WebGLCoordinateSystem,d.WebGLCubeRenderTarget,d.WebGLMultipleRenderTargets,d.WebGLRenderTarget);function K(){var e=o((function(e){return e.baseURL})),t=o((function(e){return e.text})),r=s();return i((function(){var e=new w,t=function(t){var n=t.detail,o=(e.getDelta(),n.animatedScroll),a=n.dimensions.scrollHeight-n.dimensions.height;n.dimensions.height,console.log(o/a),r.current&&(r.current.rotation.y=o/a*Math.PI*2)};return window.addEventListener("lenis-scroll",t),function(){window.removeEventListener("lenis-scroll",t)}}),[]),i((function(){e&&fetch("".concat(e,"/api/hi")).then((function(e){return e.ok?e.json():{}})).then((function(e){return e.rand})).then((function(e){o.setState({text:"hi from server.\nrandom number - ".concat((100*e).toFixed(0))})}))}),[e]),React.createElement(React.Fragment,null,React.createElement("group",{ref:r},React.createElement(l,null,React.createElement(p,{height:.0125,bevelSize:.025,bevelSegments:5,bevelThickness:.1,scale:1,bevelEnabled:!0,font:"".concat(e,"/fonts/days-font/Days_Regular.json")},"".concat(t),React.createElement(f,{transmission:1,thickness:1,roughness:.3,color:"#ffffff",attenuationDistance:5,attenuationColor:"#0000ff",metalness:0,reflectivity:.5,chromaticAberration:0,transmissionSampler:!0,temporalDistortion:.5})))))}d.WebGLRenderer,d.WebGLUtils,d.WebGPUCoordinateSystem,d.WireframeGeometry,d.WrapAroundEnding,d.ZeroCurvatureEnding,d.ZeroFactor,d.ZeroSlopeEnding,d.ZeroStencilOp,d._SRGBAFormat,d.sRGBEncoding;var Z=window.Globals["@react-three/fiber"],Q=(Z.ReactThreeFiber,Z._roots,Z.act,Z.addAfterEffect,Z.addEffect,Z.addTail,Z.advance,Z.applyProps,Z.context,Z.createEvents,Z.createPortal,Z.createRoot,Z.dispose,Z.extend,Z.flushGlobalEffects,Z.getRootState,Z.invalidate,Z.reconciler,Z.render,Z.unmountComponentAtNode,Z.useFrame);function J(){var e=o((function(e){return e.baseURL})),t=v("".concat(e,"/geometry/box.glb"));t.scene=t.scene.clone(!0);var r=!1;t.scene.traverse((function(e){e.geometry&&!r&&(r=e.geometry)}));var n=s();return Q((function(e,t){n.current.rotation.y+=1.1*t,n.current.scale.setScalar(1+.25*Math.sin(3*e.clock.elapsedTime))})),React.createElement(React.Fragment,null,React.createElement("group",{onClick:function(){o.setState({openOverlay:!o.getState().openOverlay})}},React.createElement("mesh",{ref:n,geometry:r},React.createElement(f,{transmission:1,thickness:1,roughness:.3,color:"#ffffff",attenuationDistance:5,attenuationColor:"#ff00ff",metalness:0,reflectivity:.5,chromaticAberration:0,transmissionSampler:!0,temporalDistortion:.5}))))}Z.useGraph,Z.useInstanceHandle,Z.useLoader,Z.useStore,Z.useThree,Z.Canvas,Z.events;var $=function(e,t,r){this.variables=[],this.currentTextureIndex=0;var n=A,o=new V,a=new b;a.position.z=1;var i={passThruTexture:{value:null}},s=l("uniform sampler2D passThruTexture;\n\nvoid main() {\n\n\tvec2 uv = gl_FragCoord.xy / resolution.xy;\n\n\tgl_FragColor = texture2D( passThruTexture, uv );\n\n}\n",i),c=new M(new U(2,2),s);function u(r){r.defines.resolution="vec2( "+e.toFixed(1)+", "+t.toFixed(1)+" )"}function l(e,t){var r=new j({uniforms:t=t||{},vertexShader:"attribute vec3 position;void main()\t{\n\n\tgl_Position = vec4( position, 1.0 );\n\n}\n",fragmentShader:"precision highp float; \n"+e});return u(r),r}o.add(c),this.setDataType=function(e){return n=e,this},this.addVariable=function(e,t,r){var n={name:e,initialValueTexture:r,material:this.createShaderMaterial(t),dependencies:null,renderTargets:[],wrapS:null,wrapT:null,minFilter:I,magFilter:I};return this.variables.push(n),n},this.setVariableDependencies=function(e,t){e.dependencies=t},this.init=function(){if(!1===r.capabilities.isWebGL2&&!1===r.extensions.has("OES_texture_float"))return"No OES_texture_float support for float textures.";if(0===r.capabilities.maxVertexTextures)return"No support for vertex shader textures.";for(var n=0;n<this.variables.length;n++){var o=this.variables[n];o.renderTargets[0]=this.createRenderTarget(e,t,o.wrapS,o.wrapT,o.minFilter,o.magFilter),o.renderTargets[1]=this.createRenderTarget(e,t,o.wrapS,o.wrapT,o.minFilter,o.magFilter),this.renderTexture(o.initialValueTexture,o.renderTargets[0]),this.renderTexture(o.initialValueTexture,o.renderTargets[1]);var a=o.material,i=a.uniforms;if(null!==o.dependencies)for(var s=0;s<o.dependencies.length;s++){var c=o.dependencies[s];if(c.name!==o.name){for(var u=!1,l=0;l<this.variables.length;l++)if(c.name===this.variables[l].name){u=!0;break}if(!u)return"Variable dependency not found. Variable="+o.name+", dependency="+c.name}i[c.name]={value:null},a.fragmentShader="\nuniform sampler2D "+c.name+";\n"+a.fragmentShader}}return this.currentTextureIndex=0,null},this.compute=function(){for(var e=this.currentTextureIndex,t=0===this.currentTextureIndex?1:0,r=0,n=this.variables.length;r<n;r++){var o=this.variables[r];if(null!==o.dependencies)for(var a=o.material.uniforms,i=0,s=o.dependencies.length;i<s;i++){var c=o.dependencies[i];a[c.name].value=c.renderTargets[e].texture}this.doRenderTarget(o.material,o.renderTargets[t])}this.currentTextureIndex=t},this.getCurrentRenderTarget=function(e){return e.renderTargets[this.currentTextureIndex]},this.getAlternateRenderTarget=function(e){return e.renderTargets[0===this.currentTextureIndex?1:0]},this.addResolutionDefine=u,this.createShaderMaterial=l,this.createRenderTarget=function(r,o,a,i,s,c){return new Y(r=r||e,o=o||t,{wrapS:a=a||x,wrapT:i=i||x,minFilter:s=s||I,magFilter:c=c||I,format:z,type:n,depthBuffer:!1})},this.createTexture=function(){var r=new Float32Array(e*t*4);return new C(r,e,t,z,A)},this.renderTexture=function(e,t){i.passThruTexture.value=e,this.doRenderTarget(s,t),i.passThruTexture.value=null},this.doRenderTarget=function(e,t){var n=r.getRenderTarget();c.material=e,r.setRenderTarget(t),r.render(o,a),c.material=s,r.setRenderTarget(n)}};function ee(e){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(e)}function te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function re(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==ee(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===ee(o)?o:String(o)),n)}var o}function ne(e,t,r){return t&&re(e.prototype,t),r&&re(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function oe(e,t){return oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},oe(e,t)}function ae(e){return ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ae(e)}var ie=new B,se=new O,ce=new q,ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oe(e,t)}(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=ae(t);if(r){var o=ae(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function o(){var e;return te(this,o),(e=n.call(this)).uuid=N.generateUUID(),e.name="",e.type="Geometry",e.vertices=[],e.colors=[],e.faces=[],e.faceVertexUvs=[[]],e.morphTargets=[],e.morphNormals=[],e.skinWeights=[],e.skinIndices=[],e.lineDistances=[],e.boundingBox=null,e.boundingSphere=null,e.elementsNeedUpdate=!1,e.verticesNeedUpdate=!1,e.uvsNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.lineDistancesNeedUpdate=!1,e.groupsNeedUpdate=!1,e}return ne(o,[{key:"applyMatrix4",value:function(e){for(var t=(new k).getNormalMatrix(e),r=0,n=this.vertices.length;r<n;r++)this.vertices[r].applyMatrix4(e);for(var o=0,a=this.faces.length;o<a;o++){var i=this.faces[o];i.normal.applyMatrix3(t).normalize();for(var s=0,c=i.vertexNormals.length;s<c;s++)i.vertexNormals[s].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}},{key:"rotateX",value:function(e){return ie.makeRotationX(e),this.applyMatrix4(ie),this}},{key:"rotateY",value:function(e){return ie.makeRotationY(e),this.applyMatrix4(ie),this}},{key:"rotateZ",value:function(e){return ie.makeRotationZ(e),this.applyMatrix4(ie),this}},{key:"translate",value:function(e,t,r){return ie.makeTranslation(e,t,r),this.applyMatrix4(ie),this}},{key:"scale",value:function(e,t,r){return ie.makeScale(e,t,r),this.applyMatrix4(ie),this}},{key:"lookAt",value:function(e){return se.lookAt(e),se.updateMatrix(),this.applyMatrix4(se.matrix),this}},{key:"fromBufferGeometry",value:function(e){var t=this,r=null!==e.index?e.index:void 0,n=e.attributes;if(void 0===n.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var o=n.position,a=n.normal,i=n.color,s=n.uv,c=n.uv2;void 0!==c&&(this.faceVertexUvs[1]=[]);for(var u=0;u<o.count;u++)t.vertices.push((new q).fromBufferAttribute(o,u)),void 0!==i&&t.colors.push((new T).fromBufferAttribute(i,u));function l(e,r,n,o){var u=void 0===i?[]:[t.colors[e].clone(),t.colors[r].clone(),t.colors[n].clone()],l=void 0===a?[]:[(new q).fromBufferAttribute(a,e),(new q).fromBufferAttribute(a,r),(new q).fromBufferAttribute(a,n)],f=new fe(e,r,n,l,u,o);t.faces.push(f),void 0!==s&&t.faceVertexUvs[0].push([(new X).fromBufferAttribute(s,e),(new X).fromBufferAttribute(s,r),(new X).fromBufferAttribute(s,n)]),void 0!==c&&t.faceVertexUvs[1].push([(new X).fromBufferAttribute(c,e),(new X).fromBufferAttribute(c,r),(new X).fromBufferAttribute(c,n)])}var f=e.groups;if(f.length>0)for(var h=0;h<f.length;h++)for(var p=f[h],v=p.start,d=v,m=v+p.count;d<m;d+=3)void 0!==r?l(r.getX(d),r.getX(d+1),r.getX(d+2),p.materialIndex):l(d,d+1,d+2,p.materialIndex);else if(void 0!==r)for(var g=0;g<r.count;g+=3)l(r.getX(g),r.getX(g+1),r.getX(g+2));else for(var y=0;y<o.count;y+=3)l(y,y+1,y+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(ce).negate(),this.translate(ce.x,ce.y,ce.z),this}},{key:"normalize",value:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,r=0===t?1:1/t,n=new B;return n.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix4(n),this}},{key:"computeFaceNormals",value:function(){for(var e=new q,t=new q,r=0,n=this.faces.length;r<n;r++){var o=this.faces[r],a=this.vertices[o.a],i=this.vertices[o.b],s=this.vertices[o.c];e.subVectors(s,i),t.subVectors(a,i),e.cross(t),e.normalize(),o.normal.copy(e)}}},{key:"computeVertexNormals",value:function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=new Array(this.vertices.length),r=0,n=this.vertices.length;r<n;r++)t[r]=new q;if(e)for(var o=new q,a=new q,i=0,s=this.faces.length;i<s;i++){var c=this.faces[i],u=this.vertices[c.a],l=this.vertices[c.b],f=this.vertices[c.c];o.subVectors(f,l),a.subVectors(u,l),o.cross(a),t[c.a].add(o),t[c.b].add(o),t[c.c].add(o)}else{this.computeFaceNormals();for(var h=0,p=this.faces.length;h<p;h++){var v=this.faces[h];t[v.a].add(v.normal),t[v.b].add(v.normal),t[v.c].add(v.normal)}}for(var d=0,m=this.vertices.length;d<m;d++)t[d].normalize();for(var g=0,y=this.faces.length;g<y;g++){var b=this.faces[g],x=b.vertexNormals;3===x.length?(x[0].copy(t[b.a]),x[1].copy(t[b.b]),x[2].copy(t[b.c])):(x[0]=t[b.a].clone(),x[1]=t[b.b].clone(),x[2]=t[b.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}},{key:"computeFlatVertexNormals",value:function(){this.computeFaceNormals();for(var e=0,t=this.faces.length;e<t;e++){var r=this.faces[e],n=r.vertexNormals;3===n.length?(n[0].copy(r.normal),n[1].copy(r.normal),n[2].copy(r.normal)):(n[0]=r.normal.clone(),n[1]=r.normal.clone(),n[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}},{key:"computeMorphNormals",value:function(){for(var e=0,t=this.faces.length;e<t;e++){var r=this.faces[e];r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]);for(var n=0,a=r.vertexNormals.length;n<a;n++)r.__originalVertexNormals[n]?r.__originalVertexNormals[n].copy(r.vertexNormals[n]):r.__originalVertexNormals[n]=r.vertexNormals[n].clone()}var i=new o;i.faces=this.faces;for(var s=0,c=this.morphTargets.length;s<c;s++){if(!this.morphNormals[s]){this.morphNormals[s]={},this.morphNormals[s].faceNormals=[],this.morphNormals[s].vertexNormals=[];for(var u=this.morphNormals[s].faceNormals,l=this.morphNormals[s].vertexNormals,f=0,h=this.faces.length;f<h;f++){var p=new q,v={a:new q,b:new q,c:new q};u.push(p),l.push(v)}}var d=this.morphNormals[s];i.vertices=this.morphTargets[s].vertices,i.computeFaceNormals(),i.computeVertexNormals();for(var m=0,g=this.faces.length;m<g;m++){var y=this.faces[m],b=d.faceNormals[m],x=d.vertexNormals[m];b.copy(y.normal),x.a.copy(y.vertexNormals[0]),x.b.copy(y.vertexNormals[1]),x.c.copy(y.vertexNormals[2])}}for(var w=0,T=this.faces.length;w<T;w++){var S=this.faces[w];S.normal=S.__originalFaceNormal,S.vertexNormals=S.__originalVertexNormals}}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new m),this.boundingBox.setFromPoints(this.vertices)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new W),this.boundingSphere.setFromPoints(this.vertices)}},{key:"merge",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e&&e.isGeometry){var n,o=this.vertices.length,a=this.vertices,i=e.vertices,s=this.faces,c=e.faces,u=this.colors,l=e.colors;void 0!==t&&(n=(new k).getNormalMatrix(t));for(var f=0,h=i.length;f<h;f++){var p=i[f].clone();void 0!==t&&p.applyMatrix4(t),a.push(p)}for(var v=0,d=l.length;v<d;v++)u.push(l[v].clone());for(var m=0,g=c.length;m<g;m++){var y=c[m],b=void 0,x=void 0,w=y.vertexNormals,T=y.vertexColors,S=new fe(y.a+o,y.b+o,y.c+o);S.normal.copy(y.normal),void 0!==n&&S.normal.applyMatrix3(n).normalize();for(var C=0,E=w.length;C<E;C++)b=w[C].clone(),void 0!==n&&b.applyMatrix3(n).normalize(),S.vertexNormals.push(b);S.color.copy(y.color);for(var L=0,A=T.length;L<A;L++)x=T[L],S.vertexColors.push(x.clone());S.materialIndex=y.materialIndex+r,s.push(S)}for(var _=0,P=e.faceVertexUvs.length;_<P;_++){var F=e.faceVertexUvs[_];void 0===this.faceVertexUvs[_]&&(this.faceVertexUvs[_]=[]);for(var R=0,N=F.length;R<N;R++){for(var B=F[R],M=[],G=0,D=B.length;G<D;G++)M.push(B[G].clone());this.faceVertexUvs[_].push(M)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)}},{key:"mergeMesh",value:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)}},{key:"mergeVertices",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,t={},r=[],n=[],o=Math.pow(10,e),a=0,i=this.vertices.length;a<i;a++){var s=this.vertices[a],c=Math.round(s.x*o)+"_"+Math.round(s.y*o)+"_"+Math.round(s.z*o);void 0===t[c]?(t[c]=a,r.push(this.vertices[a]),n[a]=r.length-1):n[a]=n[t[c]]}for(var u=[],l=0,f=this.faces.length;l<f;l++){var h=this.faces[l];h.a=n[h.a],h.b=n[h.b],h.c=n[h.c];for(var p=[h.a,h.b,h.c],v=0;v<3;v++)if(p[v]===p[(v+1)%3]){u.push(l);break}}for(var d=u.length-1;d>=0;d--){var m=u[d];this.faces.splice(m,1);for(var g=0,y=this.faceVertexUvs.length;g<y;g++)this.faceVertexUvs[g].splice(m,1)}var b=this.vertices.length-r.length;return this.vertices=r,b}},{key:"setFromPoints",value:function(e){this.vertices=[];for(var t=0,r=e.length;t<r;t++){var n=e[t];this.vertices.push(new q(n.x,n.y,n.z||0))}return this}},{key:"sortFacesByMaterialIndex",value:function(){for(var e=this.faces,t=e.length,r=0;r<t;r++)e[r]._id=r;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));var n,o,a=this.faceVertexUvs[0],i=this.faceVertexUvs[1];a&&a.length===t&&(n=[]),i&&i.length===t&&(o=[]);for(var s=0;s<t;s++){var c=e[s]._id;n&&n.push(a[c]),o&&o.push(i[c])}n&&(this.faceVertexUvs[0]=n),o&&(this.faceVertexUvs[1]=o)}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var r in t)void 0!==t[r]&&(e[r]=t[r]);return e}for(var n=[],o=0;o<this.vertices.length;o++){var a=this.vertices[o];n.push(a.x,a.y,a.z)}for(var i=[],s=[],c={},u=[],l={},f=[],h={},p=0;p<this.faces.length;p++){var v=this.faces[p],d=void 0!==this.faceVertexUvs[0][p],m=v.normal.length()>0,g=v.vertexNormals.length>0,y=1!==v.color.r||1!==v.color.g||1!==v.color.b,b=v.vertexColors.length>0,x=0;if(x=C(x,0,0),x=C(x,1,!0),x=C(x,2,!1),x=C(x,3,d),x=C(x,4,m),x=C(x,5,g),x=C(x,6,y),x=C(x,7,b),i.push(x),i.push(v.a,v.b,v.c),i.push(v.materialIndex),d){var w=this.faceVertexUvs[0][p];i.push(A(w[0]),A(w[1]),A(w[2]))}if(m&&i.push(E(v.normal)),g){var T=v.vertexNormals;i.push(E(T[0]),E(T[1]),E(T[2]))}if(y&&i.push(L(v.color)),b){var S=v.vertexColors;i.push(L(S[0]),L(S[1]),L(S[2]))}}function C(e,t,r){return r?e|1<<t:e&~(1<<t)}function E(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==c[t]||(c[t]=s.length/3,s.push(e.x,e.y,e.z)),c[t]}function L(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==l[t]||(l[t]=u.length,u.push(e.getHex())),l[t]}function A(e){var t=e.x.toString()+e.y.toString();return void 0!==h[t]||(h[t]=f.length/2,f.push(e.x,e.y)),h[t]}return e.data={},e.data.vertices=n,e.data.normals=s,u.length>0&&(e.data.colors=u),f.length>0&&(e.data.uvs=[f]),e.data.faces=i,e}},{key:"clone",value:function(){return(new o).copy(this)}},{key:"copy",value:function(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;for(var t=e.vertices,r=0,n=t.length;r<n;r++)this.vertices.push(t[r].clone());for(var o=e.colors,a=0,i=o.length;a<i;a++)this.colors.push(o[a].clone());for(var s=e.faces,c=0,u=s.length;c<u;c++)this.faces.push(s[c].clone());for(var l=0,f=e.faceVertexUvs.length;l<f;l++){var h=e.faceVertexUvs[l];void 0===this.faceVertexUvs[l]&&(this.faceVertexUvs[l]=[]);for(var p=0,v=h.length;p<v;p++){for(var d=h[p],m=[],g=0,y=d.length;g<y;g++){var b=d[g];m.push(b.clone())}this.faceVertexUvs[l].push(m)}}for(var x=e.morphTargets,w=0,T=x.length;w<T;w++){var S={};if(S.name=x[w].name,void 0!==x[w].vertices){S.vertices=[];for(var C=0,E=x[w].vertices.length;C<E;C++)S.vertices.push(x[w].vertices[C].clone())}if(void 0!==x[w].normals){S.normals=[];for(var L=0,A=x[w].normals.length;L<A;L++)S.normals.push(x[w].normals[L].clone())}this.morphTargets.push(S)}for(var _=e.morphNormals,P=0,F=_.length;P<F;P++){var R={};if(void 0!==_[P].vertexNormals){R.vertexNormals=[];for(var N=0,k=_[P].vertexNormals.length;N<k;N++){var B=_[P].vertexNormals[N],M={};M.a=B.a.clone(),M.b=B.b.clone(),M.c=B.c.clone(),R.vertexNormals.push(M)}}if(void 0!==_[P].faceNormals){R.faceNormals=[];for(var G=0,D=_[P].faceNormals.length;G<D;G++)R.faceNormals.push(_[P].faceNormals[G].clone())}this.morphNormals.push(R)}for(var I=e.skinWeights,O=0,U=I.length;O<U;O++)this.skinWeights.push(I[O].clone());for(var z=e.skinIndices,j=0,H=z.length;j<H;j++)this.skinIndices.push(z[j].clone());for(var V=e.lineDistances,W=0,X=V.length;W<X;W++)this.lineDistances.push(V[W]);var q=e.boundingBox;null!==q&&(this.boundingBox=q.clone());var Y=e.boundingSphere;return null!==Y&&(this.boundingSphere=Y.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}},{key:"toBufferGeometry",value:function(){var e=(new le).fromGeometry(this),t=new y,r=new Float32Array(3*e.vertices.length);if(t.setAttribute("position",new g(r,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);t.setAttribute("normal",new g(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var o=new Float32Array(3*e.colors.length);t.setAttribute("color",new g(o,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var a=new Float32Array(2*e.uvs.length);t.setAttribute("uv",new g(a,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var i=new Float32Array(2*e.uvs2.length);t.setAttribute("uv2",new g(i,2).copyVector2sArray(e.uvs2))}for(var s in t.groups=e.groups,e.morphTargets){for(var c=[],u=e.morphTargets[s],l=0,f=u.length;l<f;l++){var h=u[l],p=new L(3*h.data.length,3);p.name=h.name,c.push(p.copyVector3sArray(h.data))}t.morphAttributes[s]=c}if(e.skinIndices.length>0){var v=new L(4*e.skinIndices.length,4);t.setAttribute("skinIndex",v.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var d=new L(4*e.skinWeights.length,4);t.setAttribute("skinWeight",d.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(t.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(t.boundingBox=e.boundingBox.clone()),t}},{key:"computeTangents",value:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")}},{key:"computeLineDistances",value:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}},{key:"applyMatrix",value:function(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}],[{key:"createBufferGeometryFromObject",value:function(e){var t=new y,r=e.geometry;if(e.isPoints||e.isLine){var n=new L(3*r.vertices.length,3),o=new L(3*r.colors.length,3);if(t.setAttribute("position",n.copyVector3sArray(r.vertices)),t.setAttribute("color",o.copyColorsArray(r.colors)),r.lineDistances&&r.lineDistances.length===r.vertices.length){var a=new L(r.lineDistances.length,1);t.setAttribute("lineDistance",a.copyArray(r.lineDistances))}null!==r.boundingSphere&&(t.boundingSphere=r.boundingSphere.clone()),null!==r.boundingBox&&(t.boundingBox=r.boundingBox.clone())}else e.isMesh&&(t=r.toBufferGeometry());return t}}]),o}(E);ue.prototype.isGeometry=!0;var le=function(){function e(){te(this,e),this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}return ne(e,[{key:"computeGroups",value:function(e){var t,r,n=[],o=void 0,a=e.faces;for(r=0;r<a.length;r++){var i=a[r];i.materialIndex!==o&&(o=i.materialIndex,void 0!==t&&(t.count=3*r-t.start,n.push(t)),t={start:3*r,materialIndex:o})}void 0!==t&&(t.count=3*r-t.start,n.push(t)),this.groups=n}},{key:"fromGeometry",value:function(e){var t,r=e.faces,n=e.vertices,o=e.faceVertexUvs,a=o[0]&&o[0].length>0,i=o[1]&&o[1].length>0,s=e.morphTargets,c=s.length;if(c>0){t=[];for(var u=0;u<c;u++)t[u]={name:s[u].name,data:[]};this.morphTargets.position=t}var l,f=e.morphNormals,h=f.length;if(h>0){l=[];for(var p=0;p<h;p++)l[p]={name:f[p].name,data:[]};this.morphTargets.normal=l}var v=e.skinIndices,d=e.skinWeights,m=v.length===n.length,g=d.length===n.length;n.length>0&&0===r.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var y=0;y<r.length;y++){var b=r[y];this.vertices.push(n[b.a],n[b.b],n[b.c]);var x=b.vertexNormals;if(3===x.length)this.normals.push(x[0],x[1],x[2]);else{var w=b.normal;this.normals.push(w,w,w)}var T=b.vertexColors;if(3===T.length)this.colors.push(T[0],T[1],T[2]);else{var S=b.color;this.colors.push(S,S,S)}if(!0===a){var C=o[0][y];void 0!==C?this.uvs.push(C[0],C[1],C[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",y),this.uvs.push(new X,new X,new X))}if(!0===i){var E=o[1][y];void 0!==E?this.uvs2.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",y),this.uvs2.push(new X,new X,new X))}for(var L=0;L<c;L++){var A=s[L].vertices;t[L].data.push(A[b.a],A[b.b],A[b.c])}for(var _=0;_<h;_++){var P=f[_].vertexNormals[y];l[_].data.push(P.a,P.b,P.c)}m&&this.skinIndices.push(v[b.a],v[b.b],v[b.c]),g&&this.skinWeights.push(d[b.a],d[b.b],d[b.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}}]),e}(),fe=function(){function e(t,r,n,o,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;te(this,e),this.a=t,this.b=r,this.c=n,this.normal=o&&o.isVector3?o:new q,this.vertexNormals=Array.isArray(o)?o:[],this.color=a&&a.isColor?a:new T,this.vertexColors=Array.isArray(a)?a:[],this.materialIndex=i}return ne(e,[{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,r=e.vertexNormals.length;t<r;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var n=0,o=e.vertexColors.length;n<o;n++)this.vertexColors[n]=e.vertexColors[n].clone();return this}}]),e}();function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,s=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ve(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ve(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function de(e){if(null==e)throw new TypeError("Cannot destructure "+e)}function me(){return me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},me.apply(this,arguments)}function ge(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ye(e,t)}function ye(e,t){return ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ye(e,t)}function be(e){return be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},be(e)}function xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(r),!0).forEach((function(t){var n,o,a;n=e,o=t,a=r[t],(o=_e(o))in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Te(){Te=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),s=new F(n||[]);return o(i,"_invoke",{value:L(e,r,s)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",v="executing",d="completed",m={};function g(){}function y(){}function b(){}var x={};u(x,i,(function(){return this}));var w=Object.getPrototypeOf,T=w&&w(w(R([])));T&&T!==r&&n.call(T,i)&&(x=T);var S=b.prototype=g.prototype=Object.create(x);function C(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(o,a,i,s){var c=f(e[o],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==he(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(l).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,s)}))}s(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function L(t,r,n){var o=h;return function(a,i){if(o===v)throw new Error("Generator is already running");if(o===d){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var c=A(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?d:p,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function F(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function R(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(he(t)+" is not iterable")}return y.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},C(E.prototype),u(E.prototype,s,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new E(l(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(S),u(S,c,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=R,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function Se(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Ce(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Se(a,n,o,i,s,"next",e)}function s(e){Se(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_e(n.key),n)}}function Ae(e,t,r){return t&&Le(e.prototype,t),r&&Le(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _e(e){var t=function(e,t){if("object"!==he(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==he(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===he(t)?t:String(t)}var Pe=function(){function e(t){var r=t.gl,n=t.node,o=t.getHeadList,a=t.howManyTracker,i=void 0===a?10:a,s=t.howLongTail,c=void 0===s?32:s;Ee(this,e),this.gl=r,this.node=n,this.WIDTH=c,this.HEIGHT=i,this.COUNT=this.WIDTH*this.HEIGHT,this.getHeadList=o,this.v3v000=new q(0,0,0),this.wait=this.setup({node:n})}var t;return Ae(e,[{key:"setup",value:(t=Ce(Te().mark((function e(t){var r,n,o,a,i=this;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.node,r=this.gl,this.gpu=new $(this.WIDTH,this.HEIGHT,r),this.gpu.setDataType(A),n=this.gpu.createTexture(),o=this.gpu.createTexture(),this.fillPositionTexture(n),this.fillLookupTexture(o),this.node.onClean((function(){o.dispose(),n.dispose()})),this.positionVariable=this.gpu.addVariable("texturePosition",this.positionShader(),n),this.gpu.setVariableDependencies(this.positionVariable,[this.positionVariable]),this.positionUniforms=this.positionVariable.material.uniforms,this.positionUniforms.lookup={value:o},this.positionUniforms.headList={value:this.getHeadList()||this.headList.texture},this.node.onLoop((function(){i.positionUniforms.headList={value:i.getHeadList()||i.headList.texture}})),this.HEIGHT,this.positionUniforms.time={value:0},n.wrapS=H,n.wrapT=H,null!==(a=this.gpu.init())&&console.error(a);case 22:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"track",value:function(e){var t=e.trackers,r=void 0===t?[]:t,n=e.lerp,o=void 0===n?.3:n,a=e.dt;this.headList&&this.headList.update({trackers:r,lerp:o,dt:a})}},{key:"positionShader",value:function(){var e=this;return"\n      uniform sampler2D headList;\n      ".concat(function(){for(var t="",r=e.HEIGHT,n=0;n<r;n++)t+="\n          // uniform vec3 mouse".concat(n.toFixed(0),";\n        ");return t}(),"\n      uniform sampler2D lookup;\n      uniform float time;\n      vec3 lerp(vec3 a, vec3 b, float w)\n      {\n        return a + w*(b-a);\n      }\n      mat4 rotationX( in float angle ) {\n        return mat4(\t1.0,\t\t0,\t\t\t0,\t\t\t0,\n                0, \tcos(angle),\t-sin(angle),\t\t0,\n                0, \tsin(angle),\t cos(angle),\t\t0,\n                0, \t\t\t0,\t\t\t  0, \t\t1);\n      }\n      mat4 rotationY( in float angle ) {\n        return mat4(\tcos(angle),\t\t0,\t\tsin(angle),\t0,\n                    0,\t\t1.0,\t\t\t 0,\t0,\n                -sin(angle),\t0,\t\tcos(angle),\t0,\n                    0, \t\t0,\t\t\t\t0,\t1);\n      }\n      mat4 rotationZ( in float angle ) {\n        return mat4(\tcos(angle),\t\t-sin(angle),\t0,\t0,\n                sin(angle),\t\tcos(angle),\t\t0,\t0,\n                    0,\t\t\t\t0,\t\t1,\t0,\n                    0,\t\t\t\t0,\t\t0,\t1);\n      }\n\n      vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\n      vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\n      vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}\n      float cnoise(vec3 P){\n        vec3 Pi0 = floor(P); // Integer part for indexing\n        vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\n        Pi0 = mod(Pi0, 289.0);\n        Pi1 = mod(Pi1, 289.0);\n        vec3 Pf0 = fract(P); // Fractional part for interpolation\n        vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n        vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n        vec4 iy = vec4(Pi0.yy, Pi1.yy);\n        vec4 iz0 = Pi0.zzzz;\n        vec4 iz1 = Pi1.zzzz;\n        vec4 ixy = permute(permute(ix) + iy);\n        vec4 ixy0 = permute(ixy + iz0);\n        vec4 ixy1 = permute(ixy + iz1);\n        vec4 gx0 = ixy0 / 7.0;\n        vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n        gx0 = fract(gx0);\n        vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n        vec4 sz0 = step(gz0, vec4(0.0));\n        gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n        gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n        vec4 gx1 = ixy1 / 7.0;\n        vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n        gx1 = fract(gx1);\n        vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n        vec4 sz1 = step(gz1, vec4(0.0));\n        gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n        gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n        vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n        vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n        vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n        vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n        vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n        vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n        vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n        vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n        vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n        g000 *= norm0.x;\n        g010 *= norm0.y;\n        g100 *= norm0.z;\n        g110 *= norm0.w;\n        vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n        g001 *= norm1.x;\n        g011 *= norm1.y;\n        g101 *= norm1.z;\n        g111 *= norm1.w;\n        float n000 = dot(g000, Pf0);\n        float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n        float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n        float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n        float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n        float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n        float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n        float n111 = dot(g111, Pf1);\n        vec3 fade_xyz = fade(Pf0);\n        vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n        vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n        float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n        return 2.2 * n_xyz;\n      }\n\n      #include <common>\n\n\t\t\tvoid main()\t{\n        // const float width = resolution.x;\n        // const float height = resolution.y;\n        // float xID = floor(gl_FragCoord.x);\n        // float yID = floor(gl_FragCoord.y);\n        //\n        //\n        //\n\n        vec2 uvCursor = vec2(gl_FragCoord.x, gl_FragCoord.y) / resolution.xy;\n        vec4 positionHead = texture2D( texturePosition, uvCursor );\n        vec4 lookupData = texture2D(lookup, uvCursor);\n        vec2 nextUV = lookupData.xy;\n        float currentIDX = floor(gl_FragCoord.x);\n        float currentLine = floor(gl_FragCoord.y);\n        if (floor(currentIDX) == 0.0) {\n          // currentIDX\n          ").concat("\n\n      //\n      vec2 uvv = vec2(0.5, currentLine / ".concat(e.HEIGHT.toFixed(1),");\n\n      float ee = uvv.y;\n      vec4 texColor = texture2D(headList, uvv);\n\n      // // yolines\n      vec3 xyz = lerp(positionHead.rgb, texColor.rgb, 0.35);\n\n      // xyz.z += sin(time * 13.0) * sin(3.141592 * 12.0 * ee) * 0.2;\n      // xyz.x += cos(time * 13.0) * cos(3.141592 * 12.0 * ee) * 0.2;\n      // xyz.y += cos(time * 13.0) * cos(3.141592 * 12.0 * ee) * 0.2;\n\n      gl_FragColor = vec4(xyz.rgb, 1.0);\n\n      "),"\n        } else {\n          vec3 positionChain = texture2D(texturePosition, nextUV).xyz;\n\n          // positionChain.rgb = lerp(positionHead.rgb, positionChain.rgb, 0.1);\n\n          // positionChain.x += (rand(vec2(currentLine + 0.1)) * 2.0 - 1.0) * 2.0;\n          // positionChain.y += (rand(vec2(currentLine + 0.2)) * 2.0 - 1.0) * 2.0;\n          // positionChain.z += (rand(vec2(currentLine + 0.3)) * 2.0 - 1.0) * 2.0;\n\n          // positionChain.x += (cnoise(positionHead.rgb * 0.01 + 0.1)) * 1.5;\n          // positionChain.y += (cnoise(positionHead.rgb * 0.01 + 0.2)) * 1.5;\n          // positionChain.z += (cnoise(positionHead.rgb * 0.01 + 0.3)) * 1.5;\n\n          positionChain.xyz *= 1.0 + 0.0135 * 1.5;\n\n          gl_FragColor = vec4(positionChain, 1.0);\n        }\n\t\t\t}\n    ")}},{key:"fillPositionTexture",value:function(e){for(var t=0,r=e.image.data,n=0;n<this.HEIGHT;n++)for(var o=0;o<this.WIDTH;o++)r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0;e.needsUpdate=!0}},{key:"fillLookupTexture",value:function(e){for(var t=0,r=e.image.data,n=[],o=0;o<this.HEIGHT;o++)for(var a=0;a<this.WIDTH;a++){var i=n[n.length-1]||[0,0];r[t++]=i[0],r[t++]=i[1],r[t++]=this.WIDTH,r[t++]=this.HEIGHT,n.push([a/this.WIDTH,o/this.HEIGHT])}e.needsUpdate=!0}},{key:"render",value:function(){this.positionUniforms&&this.gpu&&(this.positionUniforms.time.value=window.performance.now()/1e3,this.gpu.compute())}},{key:"getTextureAfterCompute",value:function(){return{posTexture:this.gpu.getCurrentRenderTarget(this.positionVariable).texture}}}]),e}(),Fe=function(){function e(t){var r=t.node,n=t.sim;Ee(this,e),this.o3d=new O,this.node=r,this.sim=n,this.wait=this.setup({node:r})}var t;return Ae(e,[{key:"setup",value:(t=Ce(Te().mark((function e(t){var r,n,o,a,i,s,c,u,l,f=this;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.node,n=this,o=new Re({count:this.sim.HEIGHT,numSides:4,subdivisions:this.sim.WIDTH,openEnded:!1}),a=o.geometry,o.ballGeo,i=o.subdivisions,s=o.count,a.instanceCount=s,c={color:new T("#58519B").offsetHSL(0,0,0),emissive:new T("#58519B").offsetHSL(0,0,0),emissiveIntensity:3.5,side:_},(u=new D(we({},c))).userData.uniforms={posTexture:{value:0},time:{value:0}},u.onBeforeCompile=function(e,t){e.uniforms.posTexture=u.userData.uniforms.posTexture,e.uniforms.time=u.userData.uniforms.time;var r="\n      precision highp float;\n      // #define PI 3.1415926535897932384626433832795\n\n\n      #define lengthSegments ".concat(i.toFixed(1),"\n      attribute float angle;\n      // attribute float newPosition;\n      attribute float tubeInfo;\n      attribute vec4 offset;\n\n      uniform sampler2D posTexture;\n\n      vec3 getP3OfTex (float t, float lineIDXER) {\n        vec4 color = texture2D(posTexture,\n          vec2(\n            t,\n            lineIDXER / ").concat(f.sim.HEIGHT.toFixed(1),"\n          )\n        );\n        return color.rgb;\n      }\n\n      vec3 sampleLine (float t) {\n        vec3 pt = (offset.xyz + 0.5) * 0.0;\n\n\n        float lineIDXER = offset.w;\n        pt += getP3OfTex(t, lineIDXER);\n\n        return pt;\n      }\n\n      void createTube (float t, vec2 volume, out vec3 pos, out vec3 normal) {\n        // find next sample along curve\n        float nextT = t + (1.0 / lengthSegments);\n\n        // sample the curve in two places\n        vec3 cur = sampleLine(t);\n        vec3 next = sampleLine(nextT);\n\n        // compute the Frenet-Serret frame\n        vec3 T = normalize(next - cur);\n        vec3 B = normalize(cross(T, next + cur));\n        vec3 N = -normalize(cross(B, T));\n        // extrude outward to create a tube\n        float tubeAngle = angle;\n        float circX = cos(tubeAngle);\n        float circY = sin(tubeAngle);\n\n        // compute position and normal\n        normal.xyz = normalize(B * circX + N * circY);\n        pos.xyz = cur + B * volume.x * circX + N * volume.y * circY;\n      }\n\n      vec3 makeGeo () {\n        float t = (tubeInfo) + 0.5;\n        // t *= 2.0;\n        float thickness = 0.03 * 100.0 * 0.5 * (1.0 - t);\n\n        vec2 volume = vec2(thickness);\n        vec3 transformedYo;\n        vec3 objectNormal;\n        createTube(t, volume, transformedYo, objectNormal);\n\n        // vec3 transformedNormal = normalMatrix * objectNormal;\n\n        return transformedYo;\n      }\n\n      vec3 makeGeoNormal () {\n        float t = (tubeInfo) + 0.5;\n        // t *= 2.0;\n        float thickness = 0.03 * 100.3;\n\n        vec2 volume = vec2(thickness);\n        vec3 transformedYo;\n        vec3 objectNormal;\n        createTube(t, volume, transformedYo, objectNormal);\n\n        // vec3 transformedNormal = normalMatrix * objectNormal;\n\n        return objectNormal;\n      }\n\n        ");e.vertexShader=e.vertexShader.replace("void main() {","".concat(r.trim()," void main() {")),e.vertexShader=e.vertexShader.replace("#include <begin_vertex>","".concat("\n\n\n            vec3 nPos = makeGeo();\n            vec3 transformed = vec3( nPos );\n\n      ")),e.vertexShader=e.vertexShader.replace("#include <beginnormal_vertex>","".concat("\n\n            vec3 nPosNormal = makeGeoNormal();\n            vec3 objectNormal = vec3( nPosNormal );\n\n            // #ifdef USE_TANGENT\n            //   vec3 objectTangent = vec3( tangent.xyz );\n            // #endif\n            "))},(l=new M(a,u)).userData.enableBloom=!0,this.o3d.add(l),l.visible=!0,r.onClean((function(){f.o3d.remove(l)})),l.frustumCulled=!1,l.userData.enableBloom=!0,new(function(e){ge(i,e);var t,o,a=(t=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=be(t);if(o){var n=be(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===he(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(e){var t,o=me({},(de(e),e));return Ee(this,i),(t=a.call(this,we({},o))).onBeforeCompile=function(e,t){e.uniforms.time={value:0},e.uniforms.posTexture={value:null},n.sim.wait.then((function(){r.onLoop((function(){var t=n.sim.getTextureAfterCompute();e.uniforms.posTexture.value=t.posTexture,e.uniforms.time.value=window.performance.now()/1e3}))})),e.vertexShader=e.vertexShader.replace("#include <common>","#include <common>\n\n            attribute vec4 offset;\n            uniform sampler2D posTexture;\n            uniform float time;\n\n          "),e.vertexShader=e.vertexShader.replace("#include <begin_vertex>","\n\n            float lineIDXER = offset.w;\n            float fling = time + lineIDXER  / ".concat(n.sim.HEIGHT.toFixed(1),";\n            vec4 coord = texture2D(posTexture, vec2(0.5, lineIDXER / ").concat(n.sim.HEIGHT.toFixed(1),"));\n\n            vec3 transformed = position.rgb * 0.1 + coord.rgb;\n            "))},t}return Ae(i)}(G))(we({},c)),e.next=19,this.sim.wait;case 19:r.onLoop((function(){var e=f.sim.getTextureAfterCompute();u.userData.uniforms.posTexture.value=e.posTexture,u.userData.uniforms.time.value=window.performance.now()/1e3}));case 20:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),Re=Ae((function e(t){Ee(this,e);var r=t.count,n=void 0===r?20:r,o=t.numSides,a=void 0===o?4:o,i=t.subdivisions,s=void 0===i?50:i,c=t.openEnded,u=new S(1,1,1,a,s,void 0===c||c),l=new ue;(l=l.fromBufferGeometry(u)).rotateZ(Math.PI/2);var f=new X,h=[],p=[],v=[],d=l.vertices,m=l.faceVertexUvs[0],y=[];l.faces.forEach((function(e,t){var r=e.a,n=e.b,o=e.c,a=[d[r],d[n],d[o]],i=m[t];a.forEach((function(e,t){f.set(e.y,e.z).normalize();var r=Math.atan2(f.y,f.x);p.push(r),h.push(e.x),y.push(e.x,e.y,e.z),v.push(i[t].toArray())}))}));for(var b=new Float32Array(h),x=new Float32Array(p),w=new Float32Array(2*v.length),T=new Float32Array(y),C=0;C<b.length;C++){var E=pe(v[C],2),L=E[0],A=E[1];w[2*C+0]=L,w[2*C+1]=A}var _=new R;_.instanceCount=n,_.setAttribute("position",new g(T,3)),_.setAttribute("tubeInfo",new g(b,1)),_.setAttribute("angle",new g(x,1)),_.setAttribute("uv",new g(w,2));for(var N=[],k=Math.floor(Math.pow(n,1/3)),B=0,M=0;M<k;M++)for(var G=0;G<k;G++)for(var D=0;D<k;D++)N.push(0,0,0,B),B++;_.setAttribute("offset",new F(new Float32Array(N),4));var I=new P(.4,3),O=new R;return(O=O.copy(I)).instanceCount=n,O.setAttribute("offset",new F(new Float32Array(N),4)),we(we({},t),{},{dataLength:b.length,geometry:_,ballGeo:O})}));(function(){function e(t){var r=t.node,n=t.getHeadList,o=void 0===n?function(){}:n,a=t.howManyTrackers,i=void 0===a?8:a,s=t.tailLength,c=void 0===s?64:s,u=t.gl;Ee(this,e),this.gl=u,this.o3d=new O,this.node=r,this.howManyTrackers=i,this.tailLength=c,this.getHeadList=o,this.setup({node:r})}var t;return Ae(e,[{key:"setup",value:(t=Ce(Te().mark((function e(t){var r,n,o,a=this;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.node,n=new Pe({gl:this.gl,getHeadList:this.getHeadList,node:r,howManyTracker:this.howManyTrackers,howLongTail:this.tailLength}),o=new Fe({gl:this.gl,node:r,sim:n}),this.o3d.add(o.o3d),r.onClean((function(){a.o3d.remove(o.o3d)})),this.track=function(e){var t=e.trackers,r=void 0===t?[]:t,o=e.lerp,a=void 0===o?1:o,i=e.dt;n.track({trackers:r,lerp:a,dt:i}),n.render({})};case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}()).key="_"+Math.random();var Ne=r(568);function ke(e){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}function Be(){Be=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),s=new F(n||[]);return o(i,"_invoke",{value:L(e,r,s)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",v="executing",d="completed",m={};function g(){}function y(){}function b(){}var x={};u(x,i,(function(){return this}));var w=Object.getPrototypeOf,T=w&&w(w(R([])));T&&T!==r&&n.call(T,i)&&(x=T);var S=b.prototype=g.prototype=Object.create(x);function C(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(o,a,i,s){var c=f(e[o],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==ke(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(l).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,s)}))}s(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function L(t,r,n){var o=h;return function(a,i){if(o===v)throw new Error("Generator is already running");if(o===d){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var c=A(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?d:p,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function F(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function R(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(ke(t)+" is not iterable")}return y.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},C(E.prototype),u(E.prototype,s,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new E(l(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(S),u(S,c,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=R,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function Me(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Ge(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ge(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function Ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function De(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==ke(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ke(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===ke(o)?o:String(o)),n)}var o}function Oe(e,t,r){return t&&Ie(e.prototype,t),r&&Ie(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function je(){return React.createElement(React.Fragment,null,React.createElement("group",null,React.createElement("group",{position:[0,2,0]},React.createElement(K,null)),React.createElement("group",{position:[0,-2,0]},React.createElement(J,null)),React.createElement(h,null,React.createElement(f,{thickness:1.1}))))}function He(){var e=o((function(e){return e.openOverlay})),t=o((function(e){return e.text}));return React.createElement(React.Fragment,null,e&&React.createElement(React.Fragment,null,React.createElement("div",{style:{position:"absolute",top:"0%",right:"0%",width:"100%",height:"100%"},onClick:function(){o.setState({openOverlay:!1})}}),React.createElement("div",{className:"shadow-2xl backdrop-blur-lg p-1 text-white rounded-2xl",style:{position:"absolute",top:"5%",right:"25%",width:"calc(50% + 0.75rem * 2)",height:"calc(10% + 0.75rem * 2)",border:"1px solid #888",boxShadow:"0px 0px 30px 0px #888"}},React.createElement("textarea",{className:"bg-transparent h-full p-3 w-full block text-white appearance-none bg-opacity-0 border-none outline-none focus:outline-none ",defaultValue:t,style:{background:"transparent",appearance:"none",resize:"none",outline:"none"},onChange:function(e){o.setState({text:e.target.value})}}))))}function Ve(e){var t,r,n=e.children,a=e.baseURL,s=e.preloader,u=void 0===s?null:s,l=e.onReady,f=void 0===l?function(){}:l,h=(t=c(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,s=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return s}}(t,r)||function(e,t){if(e){if("string"==typeof e)return ze(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ze(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=h[0],v=h[1];return i((function(){a&&o.getState().setBaseURL({baseURL:a}),new Promise((function(e){e()})).then((function(){f(),v(!0)}))}),[a,f]),p?n:u}new(Oe((function e(t){var r=this,n=t.parent,o=void 0!==n&&n,a=t.name,i=void 0===a?"ThankyouJesusCore":a,s=t.global,c=void 0===s?{}:s;Ue(this,e);var u=this;this.isAborted=!1,this.isPaused=!1,this.id=Ne(Math.random()),console.log("[CREATE]",i),"undefined"!=typeof window?c=window:(c.document={addEventListener:function(){}},c.addEventListener=function(){},c.removeEventListener=function(){},c.dispatchEvent=function(){},c.performance={now:function(){}},c.requestAnimationFrame=function(){},c.CustomEvent=Oe((function e(){Ue(this,e)}))),this.react=new Proxy(this,{get:function(e,t){return u.reactTo(t)}}),this.makeKeyReactive=this.reactTo,this.parent=o,this.name=i,this.resource=new Map,this.remove=function(e){r.resource.delete(e)},this.get=function(e){return new Promise((function(t){var n=0;n=setInterval((function(){r.parent?(r.resource.has(e)||r.parent.resource.has(e))&&(clearInterval(n),t(r.resource.get(e)||r.parent.resource.get(e))):r.resource.has(e)&&(clearInterval(n),t(r.resource.get(e)))}))}))};var l="_".concat(Math.random());this.set=function(e,t){r.resource.set(e,t),c.dispatchEvent(new c.CustomEvent(e+l,{detail:t}))};var f={initFire:!1};this.onChange=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:f).initFire,o=void 0!==n&&n,a=function(e){var r=e.detail;t(r)};return c.addEventListener(e+l,a),!0===o&&r.get(e).then((function(e){t(e)})),r.onClean((function(){c.removeEventListener(e+l,a)})),function(){c.removeEventListener(e+l,a)}},this.tasks=[],this.resizeTasks=[],this.cleanTasks=[],this.onLoop=function(e){return r.tasks.push(e),function(){r.tasks.splice(r.tasks.findIndex((function(t){return t===e})),1)}},this.onResize=function(e){e(),r.resizeTasks.push(e)},this.onClean=function(e){r.cleanTasks.push(e)};var h=function(){var e,t=(e=Be().mark((function e(){var t,n,o;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Me(r.resizeTasks),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return o=n.value,e.next=7,o();case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){De(a,n,o,i,s,"next",e)}function s(e){De(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();this.doAllResize=h;var p=function(){h()};c.addEventListener("resize",p),this.onClean((function(){c.removeEventListener("resize",p)})),this.title="",this.toggle=function(){r.isPaused=!r.isPaused,console.log(r.title,"status ::",r.isPaused?"pause":"run")},this.pause=function(){r.isPaused=!0,console.log(r.title,"status ::",r.isPaused?"pause":"run")},this.play=function(){r.isPaused=!1,console.log(r.title,"status ::",r.isPaused?"pause":"run")},this.clean=function(){console.log("[CLEAN]",i),r.isAborted=!0,r.isPaused=!0;try{r.cleanTasks.forEach((function(e){return e()}))}catch(e){console.error(e)}},this.dispose=function(){r.clean()},this.lastTime=c.performance.now(),this.work=function(){if(r.timeNow=c.performance.now(),r.isAborted)return{name:r.name,duration:0};if(r.isPaused)return{name:r.name,duration:0};var e=c.performance.now();try{var t=r.timeNow,n=r.lastTime,o=t-n;r.lastTime=t,t/=1e3,(o/=1e3)>=.1&&(o=.1),r.tasks.forEach((function(e){return e(o,t)}))}catch(e){console.error(e)}var a=c.performance.now()-e;return{name:r.name,duration:a}},this.ready=new Proxy({},{get:function(e,t){return r.get(t)}}),this.now=new Proxy({},{get:function(e,t){return r.parent?r.resource.get(t)||r.parent.resource.get(t):r.resource.get(t)},set:function(e,t,n){return r.set(t,n),!0}}),o&&o.onClean((function(){r.clean()})),this.autoEvent=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c,o=arguments.length>3?arguments[3]:void 0;n.addEventListener(e,t,o),r.onClean((function(){n.removeEventListener(e,t)}))},this.makeNode=function(t){var r=t.name,n=void 0===r?"node":r,o=t.autoLoop,a=void 0!==o&&o,i=new e({parent:u,name:"".concat(n)});return a&&u.onLoop((function(){i.work()})),u.onClean((function(){i.clean()})),i},this.makeDisposableNode=function(t){var r=t.name,n=new e({parent:u,name:""+r}),o=0;return o=requestAnimationFrame((function e(){o=requestAnimationFrame(e),n.work()})),n.onClean((function(){cancelAnimationFrame(o),console.log("[CLEAN]",r)})),{dispose:function(){n.clean()},sub:n}},this.name=function(e){return function(t){r.now[e]=t}}})))({name:"thank you jesus"})})();var o=n.pJ,a=n.r_,i=n.dm;export{o as HTMLOverlay,a as Runtime,i as SmartObject};