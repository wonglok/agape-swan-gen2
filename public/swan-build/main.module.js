/*! For license information please see main.module.js.LICENSE.txt */
var e={487:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=t},12:e=>{var t,n;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],r=0;r<e.length;r+=3)for(var o=e[r]<<16|e[r+1]<<8|e[r+2],a=0;a<4;a++)8*r+6*a<=8*e.length?n.push(t.charAt(o>>>6*(3-a)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,o=0;r<e.length;o=++r%4)0!=o&&n.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*o+8)-1)<<2*o|t.indexOf(e.charAt(r))>>>6-2*o);return n}},e.exports=n},738:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},568:(e,t,n)=>{var r,o,a,i,s;r=n(12),o=n(487).utf8,a=n(738),i=n(487).bin,(s=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?i.stringToBytes(e):o.stringToBytes(e):a(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var n=r.bytesToWords(e),c=8*e.length,l=1732584193,u=-271733879,f=-1732584194,p=271733878,h=0;h<n.length;h++)n[h]=16711935&(n[h]<<8|n[h]>>>24)|4278255360&(n[h]<<24|n[h]>>>8);n[c>>>5]|=128<<c%32,n[14+(c+64>>>9<<4)]=c;var v=s._ff,m=s._gg,d=s._hh,y=s._ii;for(h=0;h<n.length;h+=16){var g=l,x=u,b=f,w=p;l=v(l,u,f,p,n[h+0],7,-680876936),p=v(p,l,u,f,n[h+1],12,-389564586),f=v(f,p,l,u,n[h+2],17,606105819),u=v(u,f,p,l,n[h+3],22,-1044525330),l=v(l,u,f,p,n[h+4],7,-176418897),p=v(p,l,u,f,n[h+5],12,1200080426),f=v(f,p,l,u,n[h+6],17,-1473231341),u=v(u,f,p,l,n[h+7],22,-45705983),l=v(l,u,f,p,n[h+8],7,1770035416),p=v(p,l,u,f,n[h+9],12,-1958414417),f=v(f,p,l,u,n[h+10],17,-42063),u=v(u,f,p,l,n[h+11],22,-1990404162),l=v(l,u,f,p,n[h+12],7,1804603682),p=v(p,l,u,f,n[h+13],12,-40341101),f=v(f,p,l,u,n[h+14],17,-1502002290),l=m(l,u=v(u,f,p,l,n[h+15],22,1236535329),f,p,n[h+1],5,-165796510),p=m(p,l,u,f,n[h+6],9,-1069501632),f=m(f,p,l,u,n[h+11],14,643717713),u=m(u,f,p,l,n[h+0],20,-373897302),l=m(l,u,f,p,n[h+5],5,-701558691),p=m(p,l,u,f,n[h+10],9,38016083),f=m(f,p,l,u,n[h+15],14,-660478335),u=m(u,f,p,l,n[h+4],20,-405537848),l=m(l,u,f,p,n[h+9],5,568446438),p=m(p,l,u,f,n[h+14],9,-1019803690),f=m(f,p,l,u,n[h+3],14,-187363961),u=m(u,f,p,l,n[h+8],20,1163531501),l=m(l,u,f,p,n[h+13],5,-1444681467),p=m(p,l,u,f,n[h+2],9,-51403784),f=m(f,p,l,u,n[h+7],14,1735328473),l=d(l,u=m(u,f,p,l,n[h+12],20,-1926607734),f,p,n[h+5],4,-378558),p=d(p,l,u,f,n[h+8],11,-2022574463),f=d(f,p,l,u,n[h+11],16,1839030562),u=d(u,f,p,l,n[h+14],23,-35309556),l=d(l,u,f,p,n[h+1],4,-1530992060),p=d(p,l,u,f,n[h+4],11,1272893353),f=d(f,p,l,u,n[h+7],16,-155497632),u=d(u,f,p,l,n[h+10],23,-1094730640),l=d(l,u,f,p,n[h+13],4,681279174),p=d(p,l,u,f,n[h+0],11,-358537222),f=d(f,p,l,u,n[h+3],16,-722521979),u=d(u,f,p,l,n[h+6],23,76029189),l=d(l,u,f,p,n[h+9],4,-640364487),p=d(p,l,u,f,n[h+12],11,-421815835),f=d(f,p,l,u,n[h+15],16,530742520),l=y(l,u=d(u,f,p,l,n[h+2],23,-995338651),f,p,n[h+0],6,-198630844),p=y(p,l,u,f,n[h+7],10,1126891415),f=y(f,p,l,u,n[h+14],15,-1416354905),u=y(u,f,p,l,n[h+5],21,-57434055),l=y(l,u,f,p,n[h+12],6,1700485571),p=y(p,l,u,f,n[h+3],10,-1894986606),f=y(f,p,l,u,n[h+10],15,-1051523),u=y(u,f,p,l,n[h+1],21,-2054922799),l=y(l,u,f,p,n[h+8],6,1873313359),p=y(p,l,u,f,n[h+15],10,-30611744),f=y(f,p,l,u,n[h+6],15,-1560198380),u=y(u,f,p,l,n[h+13],21,1309151649),l=y(l,u,f,p,n[h+4],6,-145523070),p=y(p,l,u,f,n[h+11],10,-1120210379),f=y(f,p,l,u,n[h+2],15,718787259),u=y(u,f,p,l,n[h+9],21,-343485551),l=l+g>>>0,u=u+x>>>0,f=f+b>>>0,p=p+w>>>0}return r.endian([l,u,f,p])})._ff=function(e,t,n,r,o,a,i){var s=e+(t&n|~t&r)+(o>>>0)+i;return(s<<a|s>>>32-a)+t},s._gg=function(e,t,n,r,o,a,i){var s=e+(t&r|n&~r)+(o>>>0)+i;return(s<<a|s>>>32-a)+t},s._hh=function(e,t,n,r,o,a,i){var s=e+(t^n^r)+(o>>>0)+i;return(s<<a|s>>>32-a)+t},s._ii=function(e,t,n,r,o,a,i){var s=e+(n^(t|~r))+(o>>>0)+i;return(s<<a|s>>>32-a)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var n=r.wordsToBytes(s(e,t));return t&&t.asBytes?n:t&&t.asString?i.bytesToString(n):r.bytesToHex(n)}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r={};(()=>{n.d(r,{pJ:()=>qe,r_:()=>We,dm:()=>He});var e=(self||window).Globals.zustand,t=e.create,o=(e.useStore,e.createStore,t((function(e){return{baseURL:"",setBaseURL:function(t){var n=t.baseURL;"/"===n[n.length-1]&&n.slice(0,n.length-1),e({baseURL:n})},openOverlay:!1,text:"Click Box"}}))),a=(self||window).Globals.react,i=(a.Children,a.Component,a.Fragment,a.Profiler,a.PureComponent,a.StrictMode,a.Suspense,a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,a.cloneElement,a.createContext,a.createElement,a.createFactory,a.createRef,a.forwardRef,a.isValidElement,a.lazy,a.memo,a.startTransition,a.unstable_act,a.useCallback,a.useContext,a.useDebugValue,a.useDeferredValue,a.useEffect),s=(a.useId,a.useImperativeHandle,a.useInsertionEffect,a.useLayoutEffect,a.useMemo,a.useReducer,a.useRef),c=a.useState,l=(a.useSyncExternalStore,a.useTransition,a.version,(self||window).Globals["@react-three/drei"]),u=(l.AccumulativeShadows,l.AdaptiveDpr,l.AdaptiveEvents,l.ArcballControls,l.AsciiRenderer,l.BBAnchor,l.Backdrop,l.BakeShadows,l.Billboard,l.Bounds,l.Box,l.Bvh,l.CameraControls,l.CameraShake,l.Capsule,l.CatmullRomLine,l.Caustics,l.Center,l.Circle,l.Clone,l.Cloud,l.ComputedAttribute,l.Cone,l.ContactShadows,l.CubeCamera,l.CubicBezierLine,l.CurveModifier,l.CycleRaycast,l.Cylinder,l.Decal,l.Detailed,l.DeviceOrientationControls,l.Dodecahedron,l.Edges,l.Effects,l.Environment,l.EnvironmentCube,l.EnvironmentMap,l.EnvironmentPortal,l.Example,l.Extrude,l.FaceControls,l.FaceLandmarker,l.FaceLandmarkerDefaults,l.Facemesh,l.FacemeshDatas,l.FacemeshEye,l.FacemeshEyeDefaults,l.FirstPersonControls,l.Float,l.FlyControls,l.GizmoHelper,l.GizmoViewcube,l.GizmoViewport,l.Gltf,l.GradientTexture,l.GradientType,l.Grid,l.Html,l.Hud,l.Icosahedron,l.Image,l.Instance,l.Instances,l.IsObject,l.KeyboardControls,l.Lathe,l.Lightformer,l.Line,l.Loader,l.MapControls,l.MarchingCube,l.MarchingCubes,l.MarchingPlane,l.Mask,l.Merged,l.MeshDiscardMaterial,l.MeshDistortMaterial,l.MeshPortalMaterial,l.MeshReflectorMaterial,l.MeshRefractionMaterial,l.MeshTransmissionMaterial,l.MeshWobbleMaterial,l.Octahedron,l.OrbitControls,l.OrthographicCamera,l.PerformanceMonitor,l.PerspectiveCamera,l.PivotControls,l.Plane,l.Point,l.PointMaterial,l.PointMaterialImpl,l.PointerLockControls,l.Points,l.PointsBuffer,l.Polyhedron,l.PositionPoint,l.PositionalAudio,l.Preload,l.PresentationControls,l.QuadraticBezierLine,l.RandomizedLight,l.Reflector,l.RenderTexture,l.Resize,l.Ring,l.RoundedBox,l.Sampler,l.ScreenQuad,l.ScreenSpace,l.Scroll,l.ScrollControls,l.Segment,l.SegmentObject,l.Segments,l.Select,l.Shadow,l.Shape,l.Sky,l.SoftShadows,l.Sparkles,l.Sphere,l.SpotLight,l.SpotLightShadow,l.SpriteAnimator,l.Stage,l.Stars,l.Stats,l.StatsGl,l.Svg,l.Tetrahedron,l.Text,l.Text3D,l.Torus,l.TorusKnot,l.TrackballControls,l.Trail,l.TransformControls,l.Tube,l.View,l.Wireframe,l.accumulativeContext,l.calcPosFromAngles,l.calculateScaleFactor,l.isWebGL2Available,l.meshBounds,l.shaderMaterial,l.useAnimations,l.useAspect,l.useBVH,l.useBounds,l.useBoxProjectedEnv,l.useCamera,l.useContextBridge,l.useCubeCamera,l.useCubeTexture,l.useCursor,l.useDepthBuffer,l.useDetectGPU,l.useEnvironment,l.useFBO,l.useFBX,l.useFaceControls,l.useFaceLandmarker,l.useFont,l.useGLTF,l.useGizmoContext,l.useHelper,l.useIntersect,l.useKTX2,l.useKeyboardControls,l.useMask,l.useMatcapTexture,l.useNormalTexture,l.usePerformanceMonitor,l.useProgress,l.useScroll,l.useSelect,l.useSurfaceSampler,l.useTexture,l.useTrail,l.useTrailTexture,l.useVideoTexture,(self||window).Globals.three),f=(u.ACESFilmicToneMapping,u.AddEquation,u.AddOperation,u.AdditiveAnimationBlendMode,u.AdditiveBlending,u.AlphaFormat,u.AlwaysCompare,u.AlwaysDepth,u.AlwaysStencilFunc,u.AmbientLight,u.AmbientLightProbe,u.AnimationAction,u.AnimationClip,u.AnimationLoader,u.AnimationMixer,u.AnimationObjectGroup,u.AnimationUtils,u.ArcCurve,u.ArrayCamera,u.ArrowHelper,u.Audio,u.AudioAnalyser,u.AudioContext,u.AudioListener,u.AudioLoader,u.AxesHelper,u.BackSide,u.BasicDepthPacking,u.BasicShadowMap,u.Bone,u.BooleanKeyframeTrack,u.Box2,u.Box3),p=(u.Box3Helper,u.BoxGeometry,u.BoxHelper,u.BufferAttribute),h=u.BufferGeometry,v=(u.BufferGeometryLoader,u.ByteType,u.Cache,u.Camera),m=(u.CameraHelper,u.CanvasTexture,u.CapsuleGeometry,u.CatmullRomCurve3,u.CineonToneMapping,u.CircleGeometry,u.ClampToEdgeWrapping),d=(u.Clock,u.Color),y=(u.ColorKeyframeTrack,u.ColorManagement,u.CompressedArrayTexture,u.CompressedCubeTexture,u.CompressedTexture,u.CompressedTextureLoader,u.ConeGeometry,u.CubeCamera,u.CubeReflectionMapping,u.CubeRefractionMapping,u.CubeTexture,u.CubeTextureLoader,u.CubeUVReflectionMapping,u.CubicBezierCurve,u.CubicBezierCurve3,u.CubicInterpolant,u.CullFaceBack,u.CullFaceFront,u.CullFaceFrontBack,u.CullFaceNone,u.Curve,u.CurvePath,u.CustomBlending,u.CustomToneMapping,u.CylinderGeometry),g=(u.Cylindrical,u.Data3DTexture,u.DataArrayTexture,u.DataTexture),x=(u.DataTextureLoader,u.DataUtils,u.DecrementStencilOp,u.DecrementWrapStencilOp,u.DefaultLoadingManager,u.DepthFormat,u.DepthStencilFormat,u.DepthTexture,u.DirectionalLight,u.DirectionalLightHelper,u.DiscreteInterpolant,u.DisplayP3ColorSpace,u.DodecahedronGeometry,u.DoubleSide,u.DstAlphaFactor,u.DstColorFactor,u.DynamicCopyUsage,u.DynamicDrawUsage,u.DynamicReadUsage,u.EdgesGeometry,u.EllipseCurve,u.EqualCompare,u.EqualDepth,u.EqualStencilFunc,u.EquirectangularReflectionMapping,u.EquirectangularRefractionMapping,u.Euler,u.EventDispatcher),b=(u.ExtrudeGeometry,u.FileLoader,u.Float16BufferAttribute,u.Float32BufferAttribute),w=(u.Float64BufferAttribute,u.FloatType),T=(u.Fog,u.FogExp2,u.FramebufferTexture,u.FrontSide),S=(u.Frustum,u.GLBufferAttribute,u.GLSL1,u.GLSL3,u.GreaterCompare,u.GreaterDepth,u.GreaterEqualCompare,u.GreaterEqualDepth,u.GreaterEqualStencilFunc,u.GreaterStencilFunc,u.GridHelper,u.Group,u.HalfFloatType,u.HemisphereLight,u.HemisphereLightHelper,u.HemisphereLightProbe,u.IcosahedronGeometry),z=(u.ImageBitmapLoader,u.ImageLoader,u.ImageUtils,u.IncrementStencilOp,u.IncrementWrapStencilOp,u.InstancedBufferAttribute),C=u.InstancedBufferGeometry,P=(u.InstancedInterleavedBuffer,u.InstancedMesh,u.Int16BufferAttribute,u.Int32BufferAttribute,u.Int8BufferAttribute,u.IntType,u.InterleavedBuffer,u.InterleavedBufferAttribute,u.Interpolant,u.InterpolateDiscrete,u.InterpolateLinear,u.InterpolateSmooth,u.InvertStencilOp,u.KeepStencilOp,u.KeyframeTrack,u.LOD,u.LatheGeometry,u.Layers,u.LessCompare,u.LessDepth,u.LessEqualCompare,u.LessEqualDepth,u.LessEqualStencilFunc,u.LessStencilFunc,u.Light,u.LightProbe,u.Line,u.Line3,u.LineBasicMaterial,u.LineCurve,u.LineCurve3,u.LineDashedMaterial,u.LineLoop,u.LineSegments,u.LinearEncoding,u.LinearFilter,u.LinearInterpolant,u.LinearMipMapLinearFilter,u.LinearMipMapNearestFilter,u.LinearMipmapLinearFilter,u.LinearMipmapNearestFilter,u.LinearSRGBColorSpace,u.LinearToneMapping,u.Loader,u.LoaderUtils,u.LoadingManager,u.LoopOnce,u.LoopPingPong,u.LoopRepeat,u.LuminanceAlphaFormat,u.LuminanceFormat,u.MOUSE,u.Material,u.MaterialLoader,u.MathUtils),_=u.Matrix3,A=u.Matrix4,E=(u.MaxEquation,u.Mesh),L=(u.MeshBasicMaterial,u.MeshDepthMaterial,u.MeshDistanceMaterial,u.MeshLambertMaterial,u.MeshMatcapMaterial,u.MeshNormalMaterial,u.MeshPhongMaterial,u.MeshPhysicalMaterial),B=u.MeshStandardMaterial,F=(u.MeshToonMaterial,u.MinEquation,u.MirroredRepeatWrapping,u.MixOperation,u.MultiplyBlending,u.MultiplyOperation,u.NearestFilter),k=(u.NearestMipMapLinearFilter,u.NearestMipMapNearestFilter,u.NearestMipmapLinearFilter,u.NearestMipmapNearestFilter,u.NeverCompare,u.NeverDepth,u.NeverStencilFunc,u.NoBlending,u.NoColorSpace,u.NoToneMapping,u.NormalAnimationBlendMode,u.NormalBlending,u.NotEqualCompare,u.NotEqualDepth,u.NotEqualStencilFunc,u.NumberKeyframeTrack,u.Object3D),N=(u.ObjectLoader,u.ObjectSpaceNormalMap,u.OctahedronGeometry,u.OneFactor,u.OneMinusDstAlphaFactor,u.OneMinusDstColorFactor,u.OneMinusSrcAlphaFactor,u.OneMinusSrcColorFactor,u.OrthographicCamera,u.PCFShadowMap,u.PCFSoftShadowMap,u.PMREMGenerator,u.Path,u.PerspectiveCamera,u.Plane,u.PlaneGeometry),R=(u.PlaneHelper,u.PointLight,u.PointLightHelper,u.Points,u.PointsMaterial,u.PolarGridHelper,u.PolyhedronGeometry,u.PositionalAudio,u.PropertyBinding,u.PropertyMixer,u.QuadraticBezierCurve,u.QuadraticBezierCurve3,u.Quaternion,u.QuaternionKeyframeTrack,u.QuaternionLinearInterpolant,u.RED_GREEN_RGTC2_Format,u.RED_RGTC1_Format,u.REVISION,u.RGBADepthPacking,u.RGBAFormat),M=(u.RGBAIntegerFormat,u.RGBA_ASTC_10x10_Format,u.RGBA_ASTC_10x5_Format,u.RGBA_ASTC_10x6_Format,u.RGBA_ASTC_10x8_Format,u.RGBA_ASTC_12x10_Format,u.RGBA_ASTC_12x12_Format,u.RGBA_ASTC_4x4_Format,u.RGBA_ASTC_5x4_Format,u.RGBA_ASTC_5x5_Format,u.RGBA_ASTC_6x5_Format,u.RGBA_ASTC_6x6_Format,u.RGBA_ASTC_8x5_Format,u.RGBA_ASTC_8x6_Format,u.RGBA_ASTC_8x8_Format,u.RGBA_BPTC_Format,u.RGBA_ETC2_EAC_Format,u.RGBA_PVRTC_2BPPV1_Format,u.RGBA_PVRTC_4BPPV1_Format,u.RGBA_S3TC_DXT1_Format,u.RGBA_S3TC_DXT3_Format,u.RGBA_S3TC_DXT5_Format,u.RGB_ETC1_Format,u.RGB_ETC2_Format,u.RGB_PVRTC_2BPPV1_Format,u.RGB_PVRTC_4BPPV1_Format,u.RGB_S3TC_DXT1_Format,u.RGFormat,u.RGIntegerFormat,u.RawShaderMaterial),D=(u.Ray,u.Raycaster,u.RectAreaLight,u.RedFormat,u.RedIntegerFormat,u.ReinhardToneMapping,u.RenderTarget,u.RepeatWrapping),I=(u.ReplaceStencilOp,u.ReverseSubtractEquation,u.RingGeometry,u.SIGNED_RED_GREEN_RGTC2_Format,u.SIGNED_RED_RGTC1_Format,u.SRGBColorSpace,u.Scene),G=(u.ShaderChunk,u.ShaderLib,u.ShaderMaterial),O=(u.ShadowMaterial,u.Shape,u.ShapeGeometry,u.ShapePath,u.ShapeUtils,u.ShortType,u.Skeleton,u.SkeletonHelper,u.SkinnedMesh,u.Source,u.Sphere),U=(u.SphereGeometry,u.Spherical,u.SphericalHarmonics3,u.SplineCurve,u.SpotLight,u.SpotLightHelper,u.Sprite,u.SpriteMaterial,u.SrcAlphaFactor,u.SrcAlphaSaturateFactor,u.SrcColorFactor,u.StaticCopyUsage,u.StaticDrawUsage,u.StaticReadUsage,u.StereoCamera,u.StreamCopyUsage,u.StreamDrawUsage,u.StreamReadUsage,u.StringKeyframeTrack,u.SubtractEquation,u.SubtractiveBlending,u.TOUCH,u.TangentSpaceNormalMap,u.TetrahedronGeometry,u.Texture,u.TextureLoader,u.TorusGeometry,u.TorusKnotGeometry,u.Triangle,u.TriangleFanDrawMode,u.TriangleStripDrawMode,u.TrianglesDrawMode,u.TubeGeometry,u.TwoPassDoubleSide,u.UVMapping,u.Uint16BufferAttribute,u.Uint32BufferAttribute,u.Uint8BufferAttribute,u.Uint8ClampedBufferAttribute,u.Uniform,u.UniformsGroup,u.UniformsLib,u.UniformsUtils,u.UnsignedByteType,u.UnsignedInt248Type,u.UnsignedIntType,u.UnsignedShort4444Type,u.UnsignedShort5551Type,u.UnsignedShortType,u.VSMShadowMap,u.Vector2),j=u.Vector3,V=(u.Vector4,u.VectorKeyframeTrack,u.VideoTexture,u.WebGL1Renderer,u.WebGL3DRenderTarget,u.WebGLArrayRenderTarget,u.WebGLCoordinateSystem,u.WebGLCubeRenderTarget,u.WebGLMultipleRenderTargets,u.WebGLRenderTarget);u.WebGLRenderer,u.WebGLUtils,u.WebGPUCoordinateSystem,u.WireframeGeometry,u.WrapAroundEnding,u.ZeroCurvatureEnding,u.ZeroFactor,u.ZeroSlopeEnding,u.ZeroStencilOp,u._SRGBAFormat,u.sRGBEncoding;var H=(self||window).Globals["@react-three/fiber"],q=(H.ReactThreeFiber,H._roots,H.act,H.addAfterEffect,H.addEffect,H.addTail,H.advance,H.applyProps,H.context,H.createEvents,H.createPortal,H.createRoot,H.dispose,H.extend,H.flushGlobalEffects,H.getRootState,H.invalidate,H.reconciler,H.render,H.unmountComponentAtNode,H.useFrame,H.useGraph,H.useInstanceHandle,H.useLoader,H.useStore,H.useThree);H.Canvas,H.events;var W=function(e,t,n){this.variables=[],this.currentTextureIndex=0;var r=w,o=new I,a=new v;a.position.z=1;var i={passThruTexture:{value:null}},s=u("uniform sampler2D passThruTexture;\n\nvoid main() {\n\n\tvec2 uv = gl_FragCoord.xy / resolution.xy;\n\n\tgl_FragColor = texture2D( passThruTexture, uv );\n\n}\n",i),c=new E(new N(2,2),s);function l(n){n.defines.resolution="vec2( "+e.toFixed(1)+", "+t.toFixed(1)+" )"}function u(e,t){var n=new M({uniforms:t=t||{},vertexShader:"attribute vec3 position;void main()\t{\n\n\tgl_Position = vec4( position, 1.0 );\n\n}\n",fragmentShader:"precision highp float; \n"+e});return l(n),n}o.add(c),this.setDataType=function(e){return r=e,this},this.addVariable=function(e,t,n){var r={name:e,initialValueTexture:n,material:this.createShaderMaterial(t),dependencies:null,renderTargets:[],wrapS:null,wrapT:null,minFilter:F,magFilter:F};return this.variables.push(r),r},this.setVariableDependencies=function(e,t){e.dependencies=t},this.init=function(){if(!1===n.capabilities.isWebGL2&&!1===n.extensions.has("OES_texture_float"))return"No OES_texture_float support for float textures.";if(0===n.capabilities.maxVertexTextures)return"No support for vertex shader textures.";for(var r=0;r<this.variables.length;r++){var o=this.variables[r];o.renderTargets[0]=this.createRenderTarget(e,t,o.wrapS,o.wrapT,o.minFilter,o.magFilter),o.renderTargets[1]=this.createRenderTarget(e,t,o.wrapS,o.wrapT,o.minFilter,o.magFilter),this.renderTexture(o.initialValueTexture,o.renderTargets[0]),this.renderTexture(o.initialValueTexture,o.renderTargets[1]);var a=o.material,i=a.uniforms;if(null!==o.dependencies)for(var s=0;s<o.dependencies.length;s++){var c=o.dependencies[s];if(c.name!==o.name){for(var l=!1,u=0;u<this.variables.length;u++)if(c.name===this.variables[u].name){l=!0;break}if(!l)return"Variable dependency not found. Variable="+o.name+", dependency="+c.name}i[c.name]={value:null},a.fragmentShader="\nuniform sampler2D "+c.name+";\n"+a.fragmentShader}}return this.currentTextureIndex=0,null},this.compute=function(){for(var e=this.currentTextureIndex,t=0===this.currentTextureIndex?1:0,n=0,r=this.variables.length;n<r;n++){var o=this.variables[n];if(null!==o.dependencies)for(var a=o.material.uniforms,i=0,s=o.dependencies.length;i<s;i++){var c=o.dependencies[i];a[c.name].value=c.renderTargets[e].texture}this.doRenderTarget(o.material,o.renderTargets[t])}this.currentTextureIndex=t},this.getCurrentRenderTarget=function(e){return e.renderTargets[this.currentTextureIndex]},this.getAlternateRenderTarget=function(e){return e.renderTargets[0===this.currentTextureIndex?1:0]},this.addResolutionDefine=l,this.createShaderMaterial=u,this.createRenderTarget=function(n,o,a,i,s,c){return new V(n=n||e,o=o||t,{wrapS:a=a||m,wrapT:i=i||m,minFilter:s=s||F,magFilter:c=c||F,format:R,type:r,depthBuffer:!1})},this.createTexture=function(){var n=new Float32Array(e*t*4);return new g(n,e,t,R,w)},this.renderTexture=function(e,t){i.passThruTexture.value=e,this.doRenderTarget(s,t),i.passThruTexture.value=null},this.doRenderTarget=function(e,t){var r=n.getRenderTarget();c.material=e,n.setRenderTarget(t),n.render(o,a),c.material=s,n.setRenderTarget(r)}};function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==X(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==X(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===X(o)?o:String(o)),r)}var o}function K(e,t,n){return t&&Q(e.prototype,t),n&&Q(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Z(e,t){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Z(e,t)}function J(e){return J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},J(e)}var $=new A,ee=new k,te=new j,ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=J(t);if(n){var o=J(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===X(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function o(){var e;return Y(this,o),(e=r.call(this)).uuid=P.generateUUID(),e.name="",e.type="Geometry",e.vertices=[],e.colors=[],e.faces=[],e.faceVertexUvs=[[]],e.morphTargets=[],e.morphNormals=[],e.skinWeights=[],e.skinIndices=[],e.lineDistances=[],e.boundingBox=null,e.boundingSphere=null,e.elementsNeedUpdate=!1,e.verticesNeedUpdate=!1,e.uvsNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.lineDistancesNeedUpdate=!1,e.groupsNeedUpdate=!1,e}return K(o,[{key:"applyMatrix4",value:function(e){for(var t=(new _).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++)this.vertices[n].applyMatrix4(e);for(var o=0,a=this.faces.length;o<a;o++){var i=this.faces[o];i.normal.applyMatrix3(t).normalize();for(var s=0,c=i.vertexNormals.length;s<c;s++)i.vertexNormals[s].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}},{key:"rotateX",value:function(e){return $.makeRotationX(e),this.applyMatrix4($),this}},{key:"rotateY",value:function(e){return $.makeRotationY(e),this.applyMatrix4($),this}},{key:"rotateZ",value:function(e){return $.makeRotationZ(e),this.applyMatrix4($),this}},{key:"translate",value:function(e,t,n){return $.makeTranslation(e,t,n),this.applyMatrix4($),this}},{key:"scale",value:function(e,t,n){return $.makeScale(e,t,n),this.applyMatrix4($),this}},{key:"lookAt",value:function(e){return ee.lookAt(e),ee.updateMatrix(),this.applyMatrix4(ee.matrix),this}},{key:"fromBufferGeometry",value:function(e){var t=this,n=null!==e.index?e.index:void 0,r=e.attributes;if(void 0===r.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var o=r.position,a=r.normal,i=r.color,s=r.uv,c=r.uv2;void 0!==c&&(this.faceVertexUvs[1]=[]);for(var l=0;l<o.count;l++)t.vertices.push((new j).fromBufferAttribute(o,l)),void 0!==i&&t.colors.push((new d).fromBufferAttribute(i,l));function u(e,n,r,o){var l=void 0===i?[]:[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()],u=void 0===a?[]:[(new j).fromBufferAttribute(a,e),(new j).fromBufferAttribute(a,n),(new j).fromBufferAttribute(a,r)],f=new oe(e,n,r,u,l,o);t.faces.push(f),void 0!==s&&t.faceVertexUvs[0].push([(new U).fromBufferAttribute(s,e),(new U).fromBufferAttribute(s,n),(new U).fromBufferAttribute(s,r)]),void 0!==c&&t.faceVertexUvs[1].push([(new U).fromBufferAttribute(c,e),(new U).fromBufferAttribute(c,n),(new U).fromBufferAttribute(c,r)])}var f=e.groups;if(f.length>0)for(var p=0;p<f.length;p++)for(var h=f[p],v=h.start,m=v,y=v+h.count;m<y;m+=3)void 0!==n?u(n.getX(m),n.getX(m+1),n.getX(m+2),h.materialIndex):u(m,m+1,m+2,h.materialIndex);else if(void 0!==n)for(var g=0;g<n.count;g+=3)u(n.getX(g),n.getX(g+1),n.getX(g+2));else for(var x=0;x<o.count;x+=3)u(x,x+1,x+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(te).negate(),this.translate(te.x,te.y,te.z),this}},{key:"normalize",value:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new A;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix4(r),this}},{key:"computeFaceNormals",value:function(){for(var e=new j,t=new j,n=0,r=this.faces.length;n<r;n++){var o=this.faces[n],a=this.vertices[o.a],i=this.vertices[o.b],s=this.vertices[o.c];e.subVectors(s,i),t.subVectors(a,i),e.cross(t),e.normalize(),o.normal.copy(e)}}},{key:"computeVertexNormals",value:function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=new Array(this.vertices.length),n=0,r=this.vertices.length;n<r;n++)t[n]=new j;if(e)for(var o=new j,a=new j,i=0,s=this.faces.length;i<s;i++){var c=this.faces[i],l=this.vertices[c.a],u=this.vertices[c.b],f=this.vertices[c.c];o.subVectors(f,u),a.subVectors(l,u),o.cross(a),t[c.a].add(o),t[c.b].add(o),t[c.c].add(o)}else{this.computeFaceNormals();for(var p=0,h=this.faces.length;p<h;p++){var v=this.faces[p];t[v.a].add(v.normal),t[v.b].add(v.normal),t[v.c].add(v.normal)}}for(var m=0,d=this.vertices.length;m<d;m++)t[m].normalize();for(var y=0,g=this.faces.length;y<g;y++){var x=this.faces[y],b=x.vertexNormals;3===b.length?(b[0].copy(t[x.a]),b[1].copy(t[x.b]),b[2].copy(t[x.c])):(b[0]=t[x.a].clone(),b[1]=t[x.b].clone(),b[2]=t[x.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}},{key:"computeFlatVertexNormals",value:function(){this.computeFaceNormals();for(var e=0,t=this.faces.length;e<t;e++){var n=this.faces[e],r=n.vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}},{key:"computeMorphNormals",value:function(){for(var e=0,t=this.faces.length;e<t;e++){var n=this.faces[e];n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]);for(var r=0,a=n.vertexNormals.length;r<a;r++)n.__originalVertexNormals[r]?n.__originalVertexNormals[r].copy(n.vertexNormals[r]):n.__originalVertexNormals[r]=n.vertexNormals[r].clone()}var i=new o;i.faces=this.faces;for(var s=0,c=this.morphTargets.length;s<c;s++){if(!this.morphNormals[s]){this.morphNormals[s]={},this.morphNormals[s].faceNormals=[],this.morphNormals[s].vertexNormals=[];for(var l=this.morphNormals[s].faceNormals,u=this.morphNormals[s].vertexNormals,f=0,p=this.faces.length;f<p;f++){var h=new j,v={a:new j,b:new j,c:new j};l.push(h),u.push(v)}}var m=this.morphNormals[s];i.vertices=this.morphTargets[s].vertices,i.computeFaceNormals(),i.computeVertexNormals();for(var d=0,y=this.faces.length;d<y;d++){var g=this.faces[d],x=m.faceNormals[d],b=m.vertexNormals[d];x.copy(g.normal),b.a.copy(g.vertexNormals[0]),b.b.copy(g.vertexNormals[1]),b.c.copy(g.vertexNormals[2])}}for(var w=0,T=this.faces.length;w<T;w++){var S=this.faces[w];S.normal=S.__originalFaceNormal,S.vertexNormals=S.__originalVertexNormals}}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new f),this.boundingBox.setFromPoints(this.vertices)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new O),this.boundingSphere.setFromPoints(this.vertices)}},{key:"merge",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e&&e.isGeometry){var r,o=this.vertices.length,a=this.vertices,i=e.vertices,s=this.faces,c=e.faces,l=this.colors,u=e.colors;void 0!==t&&(r=(new _).getNormalMatrix(t));for(var f=0,p=i.length;f<p;f++){var h=i[f].clone();void 0!==t&&h.applyMatrix4(t),a.push(h)}for(var v=0,m=u.length;v<m;v++)l.push(u[v].clone());for(var d=0,y=c.length;d<y;d++){var g=c[d],x=void 0,b=void 0,w=g.vertexNormals,T=g.vertexColors,S=new oe(g.a+o,g.b+o,g.c+o);S.normal.copy(g.normal),void 0!==r&&S.normal.applyMatrix3(r).normalize();for(var z=0,C=w.length;z<C;z++)x=w[z].clone(),void 0!==r&&x.applyMatrix3(r).normalize(),S.vertexNormals.push(x);S.color.copy(g.color);for(var P=0,A=T.length;P<A;P++)b=T[P],S.vertexColors.push(b.clone());S.materialIndex=g.materialIndex+n,s.push(S)}for(var E=0,L=e.faceVertexUvs.length;E<L;E++){var B=e.faceVertexUvs[E];void 0===this.faceVertexUvs[E]&&(this.faceVertexUvs[E]=[]);for(var F=0,k=B.length;F<k;F++){for(var N=B[F],R=[],M=0,D=N.length;M<D;M++)R.push(N[M].clone());this.faceVertexUvs[E].push(R)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)}},{key:"mergeMesh",value:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)}},{key:"mergeVertices",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,t={},n=[],r=[],o=Math.pow(10,e),a=0,i=this.vertices.length;a<i;a++){var s=this.vertices[a],c=Math.round(s.x*o)+"_"+Math.round(s.y*o)+"_"+Math.round(s.z*o);void 0===t[c]?(t[c]=a,n.push(this.vertices[a]),r[a]=n.length-1):r[a]=r[t[c]]}for(var l=[],u=0,f=this.faces.length;u<f;u++){var p=this.faces[u];p.a=r[p.a],p.b=r[p.b],p.c=r[p.c];for(var h=[p.a,p.b,p.c],v=0;v<3;v++)if(h[v]===h[(v+1)%3]){l.push(u);break}}for(var m=l.length-1;m>=0;m--){var d=l[m];this.faces.splice(d,1);for(var y=0,g=this.faceVertexUvs.length;y<g;y++)this.faceVertexUvs[y].splice(d,1)}var x=this.vertices.length-n.length;return this.vertices=n,x}},{key:"setFromPoints",value:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];this.vertices.push(new j(r.x,r.y,r.z||0))}return this}},{key:"sortFacesByMaterialIndex",value:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));var r,o,a=this.faceVertexUvs[0],i=this.faceVertexUvs[1];a&&a.length===t&&(r=[]),i&&i.length===t&&(o=[]);for(var s=0;s<t;s++){var c=e[s]._id;r&&r.push(a[c]),o&&o.push(i[c])}r&&(this.faceVertexUvs[0]=r),o&&(this.faceVertexUvs[1]=o)}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var r=[],o=0;o<this.vertices.length;o++){var a=this.vertices[o];r.push(a.x,a.y,a.z)}for(var i=[],s=[],c={},l=[],u={},f=[],p={},h=0;h<this.faces.length;h++){var v=this.faces[h],m=void 0!==this.faceVertexUvs[0][h],d=v.normal.length()>0,y=v.vertexNormals.length>0,g=1!==v.color.r||1!==v.color.g||1!==v.color.b,x=v.vertexColors.length>0,b=0;if(b=z(b,0,0),b=z(b,1,!0),b=z(b,2,!1),b=z(b,3,m),b=z(b,4,d),b=z(b,5,y),b=z(b,6,g),b=z(b,7,x),i.push(b),i.push(v.a,v.b,v.c),i.push(v.materialIndex),m){var w=this.faceVertexUvs[0][h];i.push(_(w[0]),_(w[1]),_(w[2]))}if(d&&i.push(C(v.normal)),y){var T=v.vertexNormals;i.push(C(T[0]),C(T[1]),C(T[2]))}if(g&&i.push(P(v.color)),x){var S=v.vertexColors;i.push(P(S[0]),P(S[1]),P(S[2]))}}function z(e,t,n){return n?e|1<<t:e&~(1<<t)}function C(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==c[t]||(c[t]=s.length/3,s.push(e.x,e.y,e.z)),c[t]}function P(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==u[t]||(u[t]=l.length,l.push(e.getHex())),u[t]}function _(e){var t=e.x.toString()+e.y.toString();return void 0!==p[t]||(p[t]=f.length/2,f.push(e.x,e.y)),p[t]}return e.data={},e.data.vertices=r,e.data.normals=s,l.length>0&&(e.data.colors=l),f.length>0&&(e.data.uvs=[f]),e.data.faces=i,e}},{key:"clone",value:function(){return(new o).copy(this)}},{key:"copy",value:function(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;for(var t=e.vertices,n=0,r=t.length;n<r;n++)this.vertices.push(t[n].clone());for(var o=e.colors,a=0,i=o.length;a<i;a++)this.colors.push(o[a].clone());for(var s=e.faces,c=0,l=s.length;c<l;c++)this.faces.push(s[c].clone());for(var u=0,f=e.faceVertexUvs.length;u<f;u++){var p=e.faceVertexUvs[u];void 0===this.faceVertexUvs[u]&&(this.faceVertexUvs[u]=[]);for(var h=0,v=p.length;h<v;h++){for(var m=p[h],d=[],y=0,g=m.length;y<g;y++){var x=m[y];d.push(x.clone())}this.faceVertexUvs[u].push(d)}}for(var b=e.morphTargets,w=0,T=b.length;w<T;w++){var S={};if(S.name=b[w].name,void 0!==b[w].vertices){S.vertices=[];for(var z=0,C=b[w].vertices.length;z<C;z++)S.vertices.push(b[w].vertices[z].clone())}if(void 0!==b[w].normals){S.normals=[];for(var P=0,_=b[w].normals.length;P<_;P++)S.normals.push(b[w].normals[P].clone())}this.morphTargets.push(S)}for(var A=e.morphNormals,E=0,L=A.length;E<L;E++){var B={};if(void 0!==A[E].vertexNormals){B.vertexNormals=[];for(var F=0,k=A[E].vertexNormals.length;F<k;F++){var N=A[E].vertexNormals[F],R={};R.a=N.a.clone(),R.b=N.b.clone(),R.c=N.c.clone(),B.vertexNormals.push(R)}}if(void 0!==A[E].faceNormals){B.faceNormals=[];for(var M=0,D=A[E].faceNormals.length;M<D;M++)B.faceNormals.push(A[E].faceNormals[M].clone())}this.morphNormals.push(B)}for(var I=e.skinWeights,G=0,O=I.length;G<O;G++)this.skinWeights.push(I[G].clone());for(var U=e.skinIndices,j=0,V=U.length;j<V;j++)this.skinIndices.push(U[j].clone());for(var H=e.lineDistances,q=0,W=H.length;q<W;q++)this.lineDistances.push(H[q]);var X=e.boundingBox;null!==X&&(this.boundingBox=X.clone());var Y=e.boundingSphere;return null!==Y&&(this.boundingSphere=Y.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}},{key:"toBufferGeometry",value:function(){var e=(new re).fromGeometry(this),t=new h,n=new Float32Array(3*e.vertices.length);if(t.setAttribute("position",new p(n,3).copyVector3sArray(e.vertices)),e.normals.length>0){var r=new Float32Array(3*e.normals.length);t.setAttribute("normal",new p(r,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var o=new Float32Array(3*e.colors.length);t.setAttribute("color",new p(o,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var a=new Float32Array(2*e.uvs.length);t.setAttribute("uv",new p(a,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var i=new Float32Array(2*e.uvs2.length);t.setAttribute("uv2",new p(i,2).copyVector2sArray(e.uvs2))}for(var s in t.groups=e.groups,e.morphTargets){for(var c=[],l=e.morphTargets[s],u=0,f=l.length;u<f;u++){var v=l[u],m=new b(3*v.data.length,3);m.name=v.name,c.push(m.copyVector3sArray(v.data))}t.morphAttributes[s]=c}if(e.skinIndices.length>0){var d=new b(4*e.skinIndices.length,4);t.setAttribute("skinIndex",d.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var y=new b(4*e.skinWeights.length,4);t.setAttribute("skinWeight",y.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(t.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(t.boundingBox=e.boundingBox.clone()),t}},{key:"computeTangents",value:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")}},{key:"computeLineDistances",value:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}},{key:"applyMatrix",value:function(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}],[{key:"createBufferGeometryFromObject",value:function(e){var t=new h,n=e.geometry;if(e.isPoints||e.isLine){var r=new b(3*n.vertices.length,3),o=new b(3*n.colors.length,3);if(t.setAttribute("position",r.copyVector3sArray(n.vertices)),t.setAttribute("color",o.copyColorsArray(n.colors)),n.lineDistances&&n.lineDistances.length===n.vertices.length){var a=new b(n.lineDistances.length,1);t.setAttribute("lineDistance",a.copyArray(n.lineDistances))}null!==n.boundingSphere&&(t.boundingSphere=n.boundingSphere.clone()),null!==n.boundingBox&&(t.boundingBox=n.boundingBox.clone())}else e.isMesh&&(t=n.toBufferGeometry());return t}}]),o}(x);ne.prototype.isGeometry=!0;var re=function(){function e(){Y(this,e),this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}return K(e,[{key:"computeGroups",value:function(e){var t,n,r=[],o=void 0,a=e.faces;for(n=0;n<a.length;n++){var i=a[n];i.materialIndex!==o&&(o=i.materialIndex,void 0!==t&&(t.count=3*n-t.start,r.push(t)),t={start:3*n,materialIndex:o})}void 0!==t&&(t.count=3*n-t.start,r.push(t)),this.groups=r}},{key:"fromGeometry",value:function(e){var t,n=e.faces,r=e.vertices,o=e.faceVertexUvs,a=o[0]&&o[0].length>0,i=o[1]&&o[1].length>0,s=e.morphTargets,c=s.length;if(c>0){t=[];for(var l=0;l<c;l++)t[l]={name:s[l].name,data:[]};this.morphTargets.position=t}var u,f=e.morphNormals,p=f.length;if(p>0){u=[];for(var h=0;h<p;h++)u[h]={name:f[h].name,data:[]};this.morphTargets.normal=u}var v=e.skinIndices,m=e.skinWeights,d=v.length===r.length,y=m.length===r.length;r.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var g=0;g<n.length;g++){var x=n[g];this.vertices.push(r[x.a],r[x.b],r[x.c]);var b=x.vertexNormals;if(3===b.length)this.normals.push(b[0],b[1],b[2]);else{var w=x.normal;this.normals.push(w,w,w)}var T=x.vertexColors;if(3===T.length)this.colors.push(T[0],T[1],T[2]);else{var S=x.color;this.colors.push(S,S,S)}if(!0===a){var z=o[0][g];void 0!==z?this.uvs.push(z[0],z[1],z[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",g),this.uvs.push(new U,new U,new U))}if(!0===i){var C=o[1][g];void 0!==C?this.uvs2.push(C[0],C[1],C[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",g),this.uvs2.push(new U,new U,new U))}for(var P=0;P<c;P++){var _=s[P].vertices;t[P].data.push(_[x.a],_[x.b],_[x.c])}for(var A=0;A<p;A++){var E=f[A].vertexNormals[g];u[A].data.push(E.a,E.b,E.c)}d&&this.skinIndices.push(v[x.a],v[x.b],v[x.c]),y&&this.skinWeights.push(m[x.a],m[x.b],m[x.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}}]),e}(),oe=function(){function e(t,n,r,o,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;Y(this,e),this.a=t,this.b=n,this.c=r,this.normal=o&&o.isVector3?o:new j,this.vertexNormals=Array.isArray(o)?o:[],this.color=a&&a.isColor?a:new d,this.vertexColors=Array.isArray(a)?a:[],this.materialIndex=i}return K(e,[{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var r=0,o=e.vertexColors.length;r<o;r++)this.vertexColors[r]=e.vertexColors[r].clone();return this}}]),e}();function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?se(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ce(e){if(null==e)throw new TypeError("Cannot destructure "+e)}function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},le.apply(this,arguments)}function ue(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fe(e,t)}function fe(e,t){return fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fe(e,t)}function pe(e){return pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pe(e)}function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){var r,o,a;r=e,o=t,a=n[t],(o=we(o))in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function me(){me=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),s=new L(r||[]);return o(i,"_invoke",{value:P(e,n,s)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",h="suspendedYield",v="executing",m="completed",d={};function y(){}function g(){}function x(){}var b={};l(b,i,(function(){return this}));var w=Object.getPrototypeOf,T=w&&w(w(B([])));T&&T!==n&&r.call(T,i)&&(b=T);var S=x.prototype=y.prototype=Object.create(b);function z(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(o,a,i,s){var c=f(e[o],e,a);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==ae(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,i,s)}),(function(e){n("throw",e,i,s)})):t.resolve(u).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,s)}))}s(c.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function P(t,n,r){var o=p;return function(a,i){if(o===v)throw new Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var s=r.delegate;if(s){var c=_(s,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?m:h,l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function _(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,_(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=f(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,d;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,d):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function B(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(ae(t)+" is not iterable")}return g.prototype=x,o(S,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:g,configurable:!0}),g.displayName=l(x,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,l(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},z(C.prototype),l(C.prototype,s,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new C(u(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},z(S),l(S,c,"Generator"),l(S,i,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=B,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:B(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),d}},t}function de(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function ye(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){de(a,r,o,i,s,"next",e)}function s(e){de(a,r,o,i,s,"throw",e)}i(void 0)}))}}function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,we(r.key),r)}}function be(e,t,n){return t&&xe(e.prototype,t),n&&xe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function we(e){var t=function(e,t){if("object"!==ae(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ae(t)?t:String(t)}var Te=function(){function e(t){var n=t.gl,r=t.node,o=t.getHeadList,a=t.howManyTracker,i=void 0===a?10:a,s=t.howLongTail,c=void 0===s?32:s;ge(this,e),this.gl=n,this.node=r,this.WIDTH=c,this.HEIGHT=i,this.COUNT=this.WIDTH*this.HEIGHT,this.getHeadList=o,this.v3v000=new j(0,0,0),this.wait=this.setup({node:r})}var t;return be(e,[{key:"setup",value:(t=ye(me().mark((function e(t){var n,r,o,a,i=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.node,n=this.gl,this.gpu=new W(this.WIDTH,this.HEIGHT,n),this.gpu.setDataType(w),r=this.gpu.createTexture(),o=this.gpu.createTexture(),this.fillPositionTexture(r),this.fillLookupTexture(o),this.node.onClean((function(){o.dispose(),r.dispose()})),this.positionVariable=this.gpu.addVariable("texturePosition",this.positionShader(),r),this.gpu.setVariableDependencies(this.positionVariable,[this.positionVariable]),this.positionUniforms=this.positionVariable.material.uniforms,this.positionUniforms.lookup={value:o},this.positionUniforms.headList={value:this.getHeadList()||this.headList.texture},this.node.onLoop((function(){i.positionUniforms.headList={value:i.getHeadList()||i.headList.texture}})),this.HEIGHT,this.positionUniforms.time={value:0},r.wrapS=D,r.wrapT=D,null!==(a=this.gpu.init())&&console.error(a);case 22:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"track",value:function(e){var t=e.trackers,n=void 0===t?[]:t,r=e.lerp,o=void 0===r?.3:r,a=e.dt;this.headList&&this.headList.update({trackers:n,lerp:o,dt:a})}},{key:"positionShader",value:function(){var e=this;return"\n      uniform sampler2D headList;\n      ".concat(function(){for(var t="",n=e.HEIGHT,r=0;r<n;r++)t+="\n          // uniform vec3 mouse".concat(r.toFixed(0),";\n        ");return t}(),"\n      uniform sampler2D lookup;\n      uniform float time;\n      vec3 lerp(vec3 a, vec3 b, float w)\n      {\n        return a + w*(b-a);\n      }\n      mat4 rotationX( in float angle ) {\n        return mat4(\t1.0,\t\t0,\t\t\t0,\t\t\t0,\n                0, \tcos(angle),\t-sin(angle),\t\t0,\n                0, \tsin(angle),\t cos(angle),\t\t0,\n                0, \t\t\t0,\t\t\t  0, \t\t1);\n      }\n      mat4 rotationY( in float angle ) {\n        return mat4(\tcos(angle),\t\t0,\t\tsin(angle),\t0,\n                    0,\t\t1.0,\t\t\t 0,\t0,\n                -sin(angle),\t0,\t\tcos(angle),\t0,\n                    0, \t\t0,\t\t\t\t0,\t1);\n      }\n      mat4 rotationZ( in float angle ) {\n        return mat4(\tcos(angle),\t\t-sin(angle),\t0,\t0,\n                sin(angle),\t\tcos(angle),\t\t0,\t0,\n                    0,\t\t\t\t0,\t\t1,\t0,\n                    0,\t\t\t\t0,\t\t0,\t1);\n      }\n\n      vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\n      vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\n      vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}\n      float cnoise(vec3 P){\n        vec3 Pi0 = floor(P); // Integer part for indexing\n        vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\n        Pi0 = mod(Pi0, 289.0);\n        Pi1 = mod(Pi1, 289.0);\n        vec3 Pf0 = fract(P); // Fractional part for interpolation\n        vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n        vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n        vec4 iy = vec4(Pi0.yy, Pi1.yy);\n        vec4 iz0 = Pi0.zzzz;\n        vec4 iz1 = Pi1.zzzz;\n        vec4 ixy = permute(permute(ix) + iy);\n        vec4 ixy0 = permute(ixy + iz0);\n        vec4 ixy1 = permute(ixy + iz1);\n        vec4 gx0 = ixy0 / 7.0;\n        vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n        gx0 = fract(gx0);\n        vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n        vec4 sz0 = step(gz0, vec4(0.0));\n        gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n        gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n        vec4 gx1 = ixy1 / 7.0;\n        vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n        gx1 = fract(gx1);\n        vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n        vec4 sz1 = step(gz1, vec4(0.0));\n        gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n        gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n        vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n        vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n        vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n        vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n        vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n        vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n        vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n        vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n        vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n        g000 *= norm0.x;\n        g010 *= norm0.y;\n        g100 *= norm0.z;\n        g110 *= norm0.w;\n        vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n        g001 *= norm1.x;\n        g011 *= norm1.y;\n        g101 *= norm1.z;\n        g111 *= norm1.w;\n        float n000 = dot(g000, Pf0);\n        float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n        float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n        float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n        float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n        float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n        float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n        float n111 = dot(g111, Pf1);\n        vec3 fade_xyz = fade(Pf0);\n        vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n        vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n        float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n        return 2.2 * n_xyz;\n      }\n\n      #include <common>\n\n\t\t\tvoid main()\t{\n        // const float width = resolution.x;\n        // const float height = resolution.y;\n        // float xID = floor(gl_FragCoord.x);\n        // float yID = floor(gl_FragCoord.y);\n        //\n        //\n        //\n\n        vec2 uvCursor = vec2(gl_FragCoord.x, gl_FragCoord.y) / resolution.xy;\n        vec4 positionHead = texture2D( texturePosition, uvCursor );\n        vec4 lookupData = texture2D(lookup, uvCursor);\n        vec2 nextUV = lookupData.xy;\n        float currentIDX = floor(gl_FragCoord.x);\n        float currentLine = floor(gl_FragCoord.y);\n        if (floor(currentIDX) == 0.0) {\n          // currentIDX\n          ").concat("\n\n      //\n      vec2 uvv = vec2(0.5, currentLine / ".concat(e.HEIGHT.toFixed(1),");\n\n      float ee = uvv.y;\n      vec4 texColor = texture2D(headList, uvv);\n\n      // // yolines\n      vec3 xyz = lerp(positionHead.rgb, texColor.rgb, 0.35);\n\n      // xyz.z += sin(time * 13.0) * sin(3.141592 * 12.0 * ee) * 0.2;\n      // xyz.x += cos(time * 13.0) * cos(3.141592 * 12.0 * ee) * 0.2;\n      // xyz.y += cos(time * 13.0) * cos(3.141592 * 12.0 * ee) * 0.2;\n\n      gl_FragColor = vec4(xyz.rgb, 1.0);\n\n      "),"\n        } else {\n          vec3 positionChain = texture2D(texturePosition, nextUV).xyz;\n\n          // positionChain.rgb = lerp(positionHead.rgb, positionChain.rgb, 0.1);\n\n          // positionChain.x += (rand(vec2(currentLine + 0.1)) * 2.0 - 1.0) * 2.0;\n          // positionChain.y += (rand(vec2(currentLine + 0.2)) * 2.0 - 1.0) * 2.0;\n          // positionChain.z += (rand(vec2(currentLine + 0.3)) * 2.0 - 1.0) * 2.0;\n\n          // positionChain.x += (cnoise(positionHead.rgb * 0.01 + 0.1)) * 1.5;\n          // positionChain.y += (cnoise(positionHead.rgb * 0.01 + 0.2)) * 1.5;\n          // positionChain.z += (cnoise(positionHead.rgb * 0.01 + 0.3)) * 1.5;\n\n          positionChain.xyz *= 1.0 + 0.0135 * 1.5;\n\n          gl_FragColor = vec4(positionChain, 1.0);\n        }\n\t\t\t}\n    ")}},{key:"fillPositionTexture",value:function(e){for(var t=0,n=e.image.data,r=0;r<this.HEIGHT;r++)for(var o=0;o<this.WIDTH;o++)n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0;e.needsUpdate=!0}},{key:"fillLookupTexture",value:function(e){for(var t=0,n=e.image.data,r=[],o=0;o<this.HEIGHT;o++)for(var a=0;a<this.WIDTH;a++){var i=r[r.length-1]||[0,0];n[t++]=i[0],n[t++]=i[1],n[t++]=this.WIDTH,n[t++]=this.HEIGHT,r.push([a/this.WIDTH,o/this.HEIGHT])}e.needsUpdate=!0}},{key:"render",value:function(){this.positionUniforms&&this.gpu&&(this.positionUniforms.time.value=window.performance.now()/1e3,this.gpu.compute())}},{key:"getTextureAfterCompute",value:function(){return{posTexture:this.gpu.getCurrentRenderTarget(this.positionVariable).texture}}}]),e}(),Se=function(){function e(t){var n=t.node,r=t.sim;ge(this,e),this.o3d=new k,this.node=n,this.sim=r,this.wait=this.setup({node:n})}var t;return be(e,[{key:"setup",value:(t=ye(me().mark((function e(t){var n,r,o,a,i,s,c,l,u,f=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.node,r=this,o=new ze({count:this.sim.HEIGHT,numSides:4,subdivisions:this.sim.WIDTH,openEnded:!1}),a=o.geometry,o.ballGeo,i=o.subdivisions,s=o.count,a.instanceCount=s,c={color:new d("#58519B").offsetHSL(0,0,0),emissive:new d("#58519B").offsetHSL(0,0,0),emissiveIntensity:3.5,side:T},(l=new B(ve({},c))).userData.uniforms={posTexture:{value:0},time:{value:0}},l.onBeforeCompile=function(e,t){e.uniforms.posTexture=l.userData.uniforms.posTexture,e.uniforms.time=l.userData.uniforms.time;var n="\n      precision highp float;\n      // #define PI 3.1415926535897932384626433832795\n\n\n      #define lengthSegments ".concat(i.toFixed(1),"\n      attribute float angle;\n      // attribute float newPosition;\n      attribute float tubeInfo;\n      attribute vec4 offset;\n\n      uniform sampler2D posTexture;\n\n      vec3 getP3OfTex (float t, float lineIDXER) {\n        vec4 color = texture2D(posTexture,\n          vec2(\n            t,\n            lineIDXER / ").concat(f.sim.HEIGHT.toFixed(1),"\n          )\n        );\n        return color.rgb;\n      }\n\n      vec3 sampleLine (float t) {\n        vec3 pt = (offset.xyz + 0.5) * 0.0;\n\n\n        float lineIDXER = offset.w;\n        pt += getP3OfTex(t, lineIDXER);\n\n        return pt;\n      }\n\n      void createTube (float t, vec2 volume, out vec3 pos, out vec3 normal) {\n        // find next sample along curve\n        float nextT = t + (1.0 / lengthSegments);\n\n        // sample the curve in two places\n        vec3 cur = sampleLine(t);\n        vec3 next = sampleLine(nextT);\n\n        // compute the Frenet-Serret frame\n        vec3 T = normalize(next - cur);\n        vec3 B = normalize(cross(T, next + cur));\n        vec3 N = -normalize(cross(B, T));\n        // extrude outward to create a tube\n        float tubeAngle = angle;\n        float circX = cos(tubeAngle);\n        float circY = sin(tubeAngle);\n\n        // compute position and normal\n        normal.xyz = normalize(B * circX + N * circY);\n        pos.xyz = cur + B * volume.x * circX + N * volume.y * circY;\n      }\n\n      vec3 makeGeo () {\n        float t = (tubeInfo) + 0.5;\n        // t *= 2.0;\n        float thickness = 0.03 * 100.0 * 0.5 * (1.0 - t);\n\n        vec2 volume = vec2(thickness);\n        vec3 transformedYo;\n        vec3 objectNormal;\n        createTube(t, volume, transformedYo, objectNormal);\n\n        // vec3 transformedNormal = normalMatrix * objectNormal;\n\n        return transformedYo;\n      }\n\n      vec3 makeGeoNormal () {\n        float t = (tubeInfo) + 0.5;\n        // t *= 2.0;\n        float thickness = 0.03 * 100.3;\n\n        vec2 volume = vec2(thickness);\n        vec3 transformedYo;\n        vec3 objectNormal;\n        createTube(t, volume, transformedYo, objectNormal);\n\n        // vec3 transformedNormal = normalMatrix * objectNormal;\n\n        return objectNormal;\n      }\n\n        ");e.vertexShader=e.vertexShader.replace("void main() {","".concat(n.trim()," void main() {")),e.vertexShader=e.vertexShader.replace("#include <begin_vertex>","".concat("\n\n\n            vec3 nPos = makeGeo();\n            vec3 transformed = vec3( nPos );\n\n      ")),e.vertexShader=e.vertexShader.replace("#include <beginnormal_vertex>","".concat("\n\n            vec3 nPosNormal = makeGeoNormal();\n            vec3 objectNormal = vec3( nPosNormal );\n\n            // #ifdef USE_TANGENT\n            //   vec3 objectTangent = vec3( tangent.xyz );\n            // #endif\n            "))},(u=new E(a,l)).userData.enableBloom=!0,this.o3d.add(u),u.visible=!0,n.onClean((function(){f.o3d.remove(u)})),u.frustumCulled=!1,u.userData.enableBloom=!0,new(function(e){ue(i,e);var t,o,a=(t=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=pe(t);if(o){var r=pe(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===ae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(e){var t,o=le({},(ce(e),e));return ge(this,i),(t=a.call(this,ve({},o))).onBeforeCompile=function(e,t){e.uniforms.time={value:0},e.uniforms.posTexture={value:null},r.sim.wait.then((function(){n.onLoop((function(){var t=r.sim.getTextureAfterCompute();e.uniforms.posTexture.value=t.posTexture,e.uniforms.time.value=window.performance.now()/1e3}))})),e.vertexShader=e.vertexShader.replace("#include <common>","#include <common>\n\n            attribute vec4 offset;\n            uniform sampler2D posTexture;\n            uniform float time;\n\n          "),e.vertexShader=e.vertexShader.replace("#include <begin_vertex>","\n\n            float lineIDXER = offset.w;\n            float fling = time + lineIDXER  / ".concat(r.sim.HEIGHT.toFixed(1),";\n            vec4 coord = texture2D(posTexture, vec2(0.5, lineIDXER / ").concat(r.sim.HEIGHT.toFixed(1),"));\n\n            vec3 transformed = position.rgb * 0.1 + coord.rgb;\n            "))},t}return be(i)}(L))(ve({},c)),e.next=19,this.sim.wait;case 19:n.onLoop((function(){var e=f.sim.getTextureAfterCompute();l.userData.uniforms.posTexture.value=e.posTexture,l.userData.uniforms.time.value=window.performance.now()/1e3}));case 20:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),ze=be((function e(t){ge(this,e);var n=t.count,r=void 0===n?20:n,o=t.numSides,a=void 0===o?4:o,i=t.subdivisions,s=void 0===i?50:i,c=t.openEnded,l=new y(1,1,1,a,s,void 0===c||c),u=new ne;(u=u.fromBufferGeometry(l)).rotateZ(Math.PI/2);var f=new U,h=[],v=[],m=[],d=u.vertices,g=u.faceVertexUvs[0],x=[];u.faces.forEach((function(e,t){var n=e.a,r=e.b,o=e.c,a=[d[n],d[r],d[o]],i=g[t];a.forEach((function(e,t){f.set(e.y,e.z).normalize();var n=Math.atan2(f.y,f.x);v.push(n),h.push(e.x),x.push(e.x,e.y,e.z),m.push(i[t].toArray())}))}));for(var b=new Float32Array(h),w=new Float32Array(v),T=new Float32Array(2*m.length),P=new Float32Array(x),_=0;_<b.length;_++){var A=ie(m[_],2),E=A[0],L=A[1];T[2*_+0]=E,T[2*_+1]=L}var B=new C;B.instanceCount=r,B.setAttribute("position",new p(P,3)),B.setAttribute("tubeInfo",new p(b,1)),B.setAttribute("angle",new p(w,1)),B.setAttribute("uv",new p(T,2));for(var F=[],k=Math.floor(Math.pow(r,1/3)),N=0,R=0;R<k;R++)for(var M=0;M<k;M++)for(var D=0;D<k;D++)F.push(0,0,0,N),N++;B.setAttribute("offset",new z(new Float32Array(F),4));var I=new S(.4,3),G=new C;return(G=G.copy(I)).instanceCount=r,G.setAttribute("offset",new z(new Float32Array(F),4)),ve(ve({},t),{},{dataLength:b.length,geometry:B,ballGeo:G})})),Ce=function(){function e(t){var n=t.node,r=t.getHeadList,o=void 0===r?function(){}:r,a=t.howManyTrackers,i=void 0===a?8:a,s=t.tailLength,c=void 0===s?64:s,l=t.gl;ge(this,e),this.gl=l,this.o3d=new k,this.node=n,this.howManyTrackers=i,this.tailLength=c,this.getHeadList=o,this.setup({node:n})}var t;return be(e,[{key:"setup",value:(t=ye(me().mark((function e(t){var n,r,o,a=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.node,r=new Te({gl:this.gl,getHeadList:this.getHeadList,node:n,howManyTracker:this.howManyTrackers,howLongTail:this.tailLength}),o=new Se({gl:this.gl,node:n,sim:r}),this.o3d.add(o.o3d),n.onClean((function(){a.o3d.remove(o.o3d)})),this.track=function(e){var t=e.trackers,n=void 0===t?[]:t,o=e.lerp,a=void 0===o?1:o,i=e.dt;r.track({trackers:n,lerp:a,dt:i}),r.render({})};case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();Ce.key="_"+Math.random();var Pe=n(568),_e=n.n(Pe);function Ae(e){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}function Ee(){Ee=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),s=new L(r||[]);return o(i,"_invoke",{value:P(e,n,s)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",h="suspendedYield",v="executing",m="completed",d={};function y(){}function g(){}function x(){}var b={};l(b,i,(function(){return this}));var w=Object.getPrototypeOf,T=w&&w(w(B([])));T&&T!==n&&r.call(T,i)&&(b=T);var S=x.prototype=y.prototype=Object.create(b);function z(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(o,a,i,s){var c=f(e[o],e,a);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==Ae(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,i,s)}),(function(e){n("throw",e,i,s)})):t.resolve(u).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,s)}))}s(c.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function P(t,n,r){var o=p;return function(a,i){if(o===v)throw new Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var s=r.delegate;if(s){var c=_(s,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?m:h,l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function _(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,_(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=f(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,d;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,d):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function B(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Ae(t)+" is not iterable")}return g.prototype=x,o(S,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:g,configurable:!0}),g.displayName=l(x,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,l(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},z(C.prototype),l(C.prototype,s,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new C(u(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},z(S),l(S,c,"Generator"),l(S,i,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=B,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:B(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),d}},t}function Le(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Be(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function Be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fe(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Ae(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Ae(o)?o:String(o)),r)}var o}function Ne(e,t,n){return t&&ke(e.prototype,t),n&&ke(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Me=new(Ne((function e(t){var n=this,r=t.parent,o=void 0!==r&&r,a=t.name,i=void 0===a?"ThankyouJesusCore":a,s=t.global,c=void 0===s?{}:s;Re(this,e);var l=this;this.isAborted=!1,this.isPaused=!1,this.id=_e()(Math.random()),console.log("[CREATE]",i),"undefined"!=typeof window?c=window:(c.document={addEventListener:function(){}},c.addEventListener=function(){},c.removeEventListener=function(){},c.dispatchEvent=function(){},c.performance={now:function(){}},c.requestAnimationFrame=function(){},c.CustomEvent=Ne((function e(){Re(this,e)}))),this.react=new Proxy(this,{get:function(e,t){return l.reactTo(t)}}),this.makeKeyReactive=this.reactTo,this.parent=o,this.name=i,this.resource=new Map,this.remove=function(e){n.resource.delete(e)},this.get=function(e){return new Promise((function(t){var r=0;r=setInterval((function(){n.parent?(n.resource.has(e)||n.parent.resource.has(e))&&(clearInterval(r),t(n.resource.get(e)||n.parent.resource.get(e))):n.resource.has(e)&&(clearInterval(r),t(n.resource.get(e)))}))}))};var u="_".concat(Math.random());this.set=function(e,t){n.resource.set(e,t),c.dispatchEvent(new c.CustomEvent(e+u,{detail:t}))};var f={initFire:!1};this.onChange=function(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:f).initFire,o=void 0!==r&&r,a=function(e){var n=e.detail;t(n)};return c.addEventListener(e+u,a),!0===o&&n.get(e).then((function(e){t(e)})),n.onClean((function(){c.removeEventListener(e+u,a)})),function(){c.removeEventListener(e+u,a)}},this.tasks=[],this.resizeTasks=[],this.cleanTasks=[],this.onLoop=function(e){return n.tasks.push(e),function(){n.tasks.splice(n.tasks.findIndex((function(t){return t===e})),1)}},this.onResize=function(e){e(),n.resizeTasks.push(e)},this.onClean=function(e){n.cleanTasks.push(e)};var p=function(){var e,t=(e=Ee().mark((function e(){var t,r,o;return Ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Le(n.resizeTasks),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return o=r.value,e.next=7,o();case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Fe(a,r,o,i,s,"next",e)}function s(e){Fe(a,r,o,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();this.doAllResize=p;var h=function(){p()};c.addEventListener("resize",h),this.onClean((function(){c.removeEventListener("resize",h)})),this.title="",this.toggle=function(){n.isPaused=!n.isPaused,console.log(n.title,"status ::",n.isPaused?"pause":"run")},this.pause=function(){n.isPaused=!0,console.log(n.title,"status ::",n.isPaused?"pause":"run")},this.play=function(){n.isPaused=!1,console.log(n.title,"status ::",n.isPaused?"pause":"run")},this.clean=function(){console.log("[CLEAN]",i),n.isAborted=!0,n.isPaused=!0;try{n.cleanTasks.forEach((function(e){return e()}))}catch(e){console.error(e)}},this.dispose=function(){n.clean()},this.lastTime=c.performance.now(),this.work=function(){if(n.timeNow=c.performance.now(),n.isAborted)return{name:n.name,duration:0};if(n.isPaused)return{name:n.name,duration:0};var e=c.performance.now();try{var t=n.timeNow,r=n.lastTime,o=t-r;n.lastTime=t,t/=1e3,(o/=1e3)>=.1&&(o=.1),n.tasks.forEach((function(e){return e(o,t)}))}catch(e){console.error(e)}var a=c.performance.now()-e;return{name:n.name,duration:a}},this.ready=new Proxy({},{get:function(e,t){return n.get(t)}}),this.now=new Proxy({},{get:function(e,t){return n.parent?n.resource.get(t)||n.parent.resource.get(t):n.resource.get(t)},set:function(e,t,r){return n.set(t,r),!0}}),o&&o.onClean((function(){n.clean()})),this.autoEvent=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c,o=arguments.length>3?arguments[3]:void 0;r.addEventListener(e,t,o),n.onClean((function(){r.removeEventListener(e,t)}))},this.makeNode=function(t){var n=t.name,r=void 0===n?"node":n,o=t.autoLoop,a=void 0!==o&&o,i=new e({parent:l,name:"".concat(r)});return a&&l.onLoop((function(){i.work()})),l.onClean((function(){i.clean()})),i},this.makeDisposableNode=function(t){var n=t.name,r=new e({parent:l,name:""+n}),o=0;return o=requestAnimationFrame((function e(){o=requestAnimationFrame(e),r.work()})),r.onClean((function(){cancelAnimationFrame(o),console.log("[CLEAN]",n)})),{dispose:function(){r.clean()},sub:r}},this.name=function(e){return function(t){n.now[e]=t}}})))({name:"thank you jesus"});function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==De(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==De(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===De(o)?o:String(o)),r)}var o}function Ge(e,t){return Ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ge(e,t)}function Oe(e){return Oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Oe(e)}function Ue(){var e=s(),t=q((function(e){return e.gl}));return i((function(){if(t){var n=new je({gl:t});return e.current.clear(),e.current.add(n),function(){n.removeFromParent(),n.core.clean()}}}),[t]),React.createElement("group",{ref:e})}var je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ge(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Oe(r);if(o){var n=Oe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===De(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(){var e,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).gl;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=a.call(this)).gl=t,e.setup(),e}return t=i,(n=[{key:"setup",value:function(){var e=this;this.core=Me.makeDisposableNode({name:"vortex"}).sub;var t=this.gl,n=128,r=128,o=new W(n,r,t);o.setDataType(w);var a,i=new Float32Array(65536),s=new g(i,n,r,R,w);a=0;for(var c=0;c<n;c++)for(var l=0;l<r;l++){var u=a/4;i[a+0]=u%6,i[a+1]=Math.floor(u/6),i[a+2]=16384/6,i[a+3]=u,a+=4}var f=new Float32Array(65536),p=new g(f,n,r,R,w);a=0;for(var h=0;h<r;h++)for(var v=0;v<n;v++)f[a+0]=0,f[a+1]=0,f[a+2]=0,f[a+3]=1,a+=4;var m=o.addVariable("tPos","\n#include <common>\n\nprecision highp float;\nprecision highp sampler2D;\n\nuniform float iTime;\nuniform sampler2D tIdx;\n\nmat3 rotateX(float rad) {\n    float c = cos(rad);\n    float s = sin(rad);\n    return mat3(\n        1.0, 0.0, 0.0,\n        0.0, c, s,\n        0.0, -s, c\n    );\n}\n\nmat3 rotateY(float rad) {\n    float c = cos(rad);\n    float s = sin(rad);\n    return mat3(\n        c, 0.0, -s,\n        0.0, 1.0, 0.0,\n        s, 0.0, c\n    );\n}\n\nmat3 rotateZ(float rad) {\n    float c = cos(rad);\n    float s = sin(rad);\n    return mat3(\n        c, s, 0.0,\n        -s, c, 0.0,\n        0.0, 0.0, 1.0\n    );\n}\n\nmat3 rotateQ (vec3 axis, float rad) {\n    float hr = rad / 2.0;\n    float s = sin( hr );\n    vec4 q = vec4(axis * s, cos( hr ));\n    vec3 q2 = q.xyz + q.xyz;\n    vec3 qq2 = q.xyz * q2;\n    vec2 qx = q.xx * q2.yz;\n    float qy = q.y * q2.z;\n    vec3 qw = q.w * q2.xyz;\n\n    return mat3(\n        1.0 - (qq2.y + qq2.z),  qx.x - qw.z,            qx.y + qw.y,\n        qx.x + qw.z,            1.0 - (qq2.x + qq2.z),  qy - qw.x,\n        qx.y - qw.y,            qy + qw.x,              1.0 - (qq2.x + qq2.y)\n    );\n}\n\n\n#define M_PI 3.1415926535897932384626433832795\nfloat atan2(in float y, in float x) {\n  bool xgty = (abs(x) > abs(y));\n  return mix(M_PI/2.0 - atan(x,y), atan(y,x), float(xgty));\n}\nvec3 fromBall(float r, float az, float el) {\n  return vec3(\n    r * cos(el) * cos(az),\n    r * cos(el) * sin(az),\n    r * sin(el)\n  );\n}\nvoid toBall(vec3 pos, out float az, out float el) {\n  az = atan2(pos.y, pos.x);\n  el = atan2(pos.z, sqrt(pos.x * pos.x + pos.y * pos.y));\n}\n// float az = 0.0;\n// float el = 0.0;\n// vec3 noiser = vec3(lastVel);\n// toBall(noiser, az, el);\n// lastVel.xyz = fromBall(1.0, az, el);\n\n\nvoid toPlane (inout vec2 rect, inout vec4 pos, float squareVertexID, inout bool shouldSkipRender) {\n  if (squareVertexID == 0.0) {\n    pos.x = 1.0 * rect.x; //Width;\n    pos.y = 1.0 * rect.y; //Height;\n    pos.z = 0.0;\n  } else if (squareVertexID == 1.0) {\n    pos.x = -1.0 * rect.x; //Width;\n    pos.y = 1.0 * rect.y; //Height;\n    pos.z = 0.0;\n  } else if (squareVertexID == 2.0) {\n    pos.x = -1.0 * rect.x; //Width;\n    pos.y = -1.0 * rect.y; //Height;\n    pos.z = 0.0;\n  } else if (squareVertexID == 3.0) {\n    pos.x = 1.0 * rect.x; //Width;\n    pos.y = 1.0 * rect.y; //Height;\n    pos.z = 0.0;\n  } else if (squareVertexID == 4.0) {\n    pos.x = -1.0 * rect.x; //Width;\n    pos.y = -1.0 * rect.y; //Height;\n    pos.z = 0.0;\n  } else if (squareVertexID == 5.0) {\n    pos.x = 1.0 * rect.x; //Width;\n    pos.y = -1.0 * rect.y; //Height;\n    pos.z = 0.0;\n  } else {\n    shouldSkipRender = true;\n  }\n}\n\n\nvoid toTriangle (inout vec2 rect, inout vec4 pos, float squareVertexID, inout bool shouldSkipRender) {\n  if (mod(squareVertexID, 3.0) == 0.0) {\n    pos.x = 1.0 * rect.x; //Width;\n    pos.y = 1.0 * rect.y; //Height;\n    pos.z = 0.0;\n  } else if (mod(squareVertexID, 3.0) == 1.0) {\n    pos.x = -1.0 * rect.x; //Width;\n    pos.y = 1.0 * rect.y; //Height;\n    pos.z = 0.0;\n  } else if (mod(squareVertexID, 3.0) == 2.0) {\n    pos.x = -1.0 * rect.x; //Width;\n    pos.y = -1.0 * rect.y; //Height;\n    pos.z = 0.0;\n  } else {\n    shouldSkipRender = true;\n  }\n}\n\nvec2 spiral (vec2 uvv, vec2 reso, float radius, float angle, vec2 center) {\n  // float radius = 10.0;\n  // float angle = 1.8;\n  // vec2 center = vec2(0.0, 0.0);\n\n  vec2 tc = uvv * reso.xy;\n  tc -= center;\n  float dist = length(tc);\n  if (dist < radius) {\n    float percent = (radius - dist) / radius;\n    float theta = percent * percent * angle * 8.0;\n    float s = sin(theta);\n    float c = cos(theta);\n    tc = vec2(dot(tc, vec2(c, -s)), dot(tc, vec2(s, c)));\n  }\n  tc += center;\n  vec2 coord = vec2(tc / reso.xy);\n  return coord;\n}\n\nvec3 spiral3 (vec3 uvv, vec3 reso, float radius, float angle, vec3 center) {\n  // float radius = 10.0;\n  // float angle = 1.8;\n  // vec3 center = vec3(0.0, 0.0);\n\n  vec3 tc = uvv * reso.xyz;\n  tc -= center;\n  float dist = length(tc);\n  if (dist < radius) {\n    float percent = (radius - dist) / radius;\n    float theta = percent * percent * angle * 8.0;\n    float s = sin(theta);\n    float c = cos(theta);\n    float t = cos(theta);\n    tc = vec3(\n      dot(tc, vec3(c, c, s)),\n      dot(tc, vec3(c, s, c)),\n      dot(tc, vec3(s, c, c))\n    );\n  }\n  tc += center;\n  vec3 coord = vec3(tc / reso.xyz);\n  return coord;\n}\n\nuniform vec3 mousePos;\nuniform vec3 screen;\nuniform float enterCirlce;\nvoid main ()\t{\n\n  float time = iTime;\n  vec2 cellSize = 1.0 / resolution.xy;\n  vec2 newCell = gl_FragCoord.xy;\n  vec2 uv = newCell * cellSize;\n  vec4 pos = texture2D(tPos, uv);\n\n\n  // vec4 vel = texture2D(tVel, uv);\n\n\n  bool shouldSkipRendering = false;\n  float mode = 9.0;\n\n  float timer2 = mod(time * 0.1 , 3.0);\n\n  if (enterCirlce == 1.0) {\n    mode = 5.0;\n  } else {\n    if (timer2 >= 2.0) {\n      mode = 7.0;\n      time *= 0.3;\n    } else if (timer2 >= 1.0) {\n      mode = 6.0;\n      time *= 0.3;\n    } else {\n      time *= 0.3;\n    }\n  }\n\n  time = mod(time, M_PI * 4.0);\n\n\n\n\n  if (pos.x == 0.0 && pos.y == 0.0 && pos.z == 0.0) {\n//     vec4 idx = texture2D(tIdx, uv);\n\n\n//     float vertexID = idx.w;\n//     float squareVertexID = idx.x;\n//     float squareIDX = idx.y;\n//     float totalSquares = idx.z;\n\n//     vec2 plane = vec2(\n//       2.0, // width\n//       2.0 // height\n//     );\n\n//     float dimension = pow(totalSquares, 1.0 / 3.0);\n//     float cubeID = mod(squareIDX, dimension);\n\n//     float xx = mod(cubeID * pow(dimension, 0.0), dimension);\n//     float yy = mod(cubeID * pow(dimension, 1.0), dimension);\n//     float zz = mod(cubeID * pow(dimension, 2.0), dimension);\n\n//     vec3 finalXYZ = vec3(xx, yy, zz);\n\n//     float adjustToCenter = dimension * -0.5;\n//     finalXYZ += adjustToCenter;\n\n//     float changeTo = 1.0 / dimension;\n//     finalXYZ *= changeTo;\n\n//     vec4 offset = vec4(finalXYZ, 1.0) * 50.0;\n\n//     float az = 0.0;\n//     float el = 0.0;\n\n//     vec3 virtualBall = vec3(offset.xyz);\n//     toBall(virtualBall, az, el);\n\n//     toPlane(plane, pos, squareVertexID, shouldSkipRendering);\n// //\n//     // pos.xyz += fromBall(5.0, az, el);\n//     // pos.xyz += vec3(7.0 * offset);\n\n\n    float az = 0.0;\n    float el = 0.0;\n    vec3 noiser = vec3(uv.xy, rand(uv.xy));\n    toBall(noiser, az, el);\n\n    az += sin(time + rand(pos.xy) * cos(time));\n    el += cos(time + rand(pos.xy) * sin(time));\n\n    if (mode == 9.0) {\n      pos.xyz = fromBall(10.0, az, el);\n    } else {\n      pos.xyz = fromBall(350.0, az, el);\n    }\n\n    //\n  } else {\n    // ---------\n\n    // if (mod(time * 0.05, 1.0) < 0.3) {\n    //   mode = 1.0;\n    // }\n\n    if (mode == 1.0) {\n      vec3 mpos = pos.xyz / 350.0 * 3.14159264 * 2.0;\n\n      pos.xyz = rotateX(mpos.x) * pos.xyz;\n      pos.xyz = rotateY(mpos.y) * pos.xyz;\n      pos.xyz = rotateZ(mpos.z) * pos.xyz;\n    } else if (mode == 2.0) {\n      vec3 mpos = pos.xyz / 350.0 * 3.14159264 * 2.0;\n\n      pos.xyz = rotateX(mpos.x) * pos.xyz;\n      pos.xyz = rotateY(mpos.y) * pos.xyz;\n      pos.xyz = rotateZ(mpos.z) * pos.xyz;\n\n      pos.xyz = rotateQ(normalize(mpos.xyz), time) * pos.xyz;\n    } else if (mode == 3.0) {\n      vec3 mpos = pos.xyz / 350.0 * 3.14159264 * 2.0;\n\n      pos.xyz = rotateX(mpos.x) * pos.xyz;\n      pos.xyz = rotateY(mpos.y) * pos.xyz;\n      pos.xyz = rotateZ(mpos.z) * pos.xyz;\n\n      pos.xyz += rand(uv) * 1.0;\n\n      pos.xyz = rotateQ(normalize(mpos.xyz), time * 0.5) * pos.xyz;\n\n      // pos.xyz = rotateX(time) * pos.xyz;\n    } else if (mode == 4.0) {\n      vec3 mpos = pos.xyz / 350.0 * 3.14159264 * 2.0;\n\n      pos.xyz = rotateX(mpos.x) * pos.xyz;\n      pos.xyz = rotateY(mpos.y) * pos.xyz;\n      pos.xyz = rotateZ(mpos.z) * pos.xyz;\n\n      pos.xyz += rand(uv) * 0.8;\n\n      pos.xyz = rotateQ(normalize(mpos.zyx), time * 0.65) * pos.xyz;\n    } else if (mode == 5.0) {\n      float scaler = 1.0 / 350.0 * 3.14159264 * 2.0;\n      vec3 mpos = pos.xyz * scaler;\n\n      vec2 reso = vec2(1.0, 1.0);\n      float radius = 20.0;\n      float angle = 12.0;\n      vec2 center = vec2(0.0);\n\n      pos.xy += spiral(sin(tan(mpos.xy)), reso, radius, angle, center);\n    } else if (mode == 6.0) {\n      /** BACKUP */\n      /** BACKUP */\n      /** BACKUP */\n      /** BACKUP */\n      /** BACKUP */\n\n      // float scaler = 1.0 / 350.0 * 3.14159264 * 2.0;\n      // vec3 mpos = pos.xyz * scaler;\n\n\n      // vec3 reso = vec3(1.0, 1.0, 1.0);\n      // float radius = 20.0;\n      // float angle = 12.0;\n      // vec3 center = vec3(0.0);\n\n      // // pos.xyz += spiral3(sin(sin(mpos.xyz)), reso, radius, angle, center);\n\n      // pos.xyz = rotateQ(normalize(mpos.xyz * sin(mpos + time)), mod(time * 0.0065, 1.0)) * pos.xyz;\n      // pos.xyz = rotateQ(normalize(vec3(1.0)), mod(time * 0.0065, 1.0)) * pos.xyz;\n\n      /** BACKUP */\n      /** BACKUP */\n      /** BACKUP */\n      /** BACKUP */\n\n      float scaler = 1.0 / 350.0 * 3.14159264 * 2.0;\n      vec3 mpos = pos.xyz * scaler;\n\n      vec3 reso = vec3(1.0, 1.0, 1.0);\n      float radius = 20.0;\n      float angle = 12.0;\n      vec3 center = vec3(0.0);\n\n\n      pos.xyz = rotateQ(normalize(mpos.xyz * sin(mpos + time * 0.2) * vec3(1.0, 0.1, 0.5)), mod(time * 0.0065, 1.0)) * pos.xyz;\n      pos.xyz = rotateQ(normalize(vec3(-0.3, 0.0, 1.0)), mod(time * 0.0065, 1.0)) * pos.xyz;\n      pos.xyz = pos.xyz * rotateY(0.025);\n\n\n      //\n      // pos.xyz += spiral3(sin(sin(mpos.xyz)), reso, radius, angle, center);\n      // pos.xyz += spiral3(sin(sin(mpos.xyz * 30.0)), reso, radius, angle, center);\n\n    } else if (mode == 7.0) {\n      float scaler = 1.0 / 350.0 * 3.14159264 * 2.0;\n      vec3 mpos = pos.xyz * scaler;\n\n      vec3 reso = vec3(1.0, 1.0, 1.0);\n      float radius = 20.0;\n      float angle = 12.0;\n      vec3 center = vec3(0.0);\n\n      pos.xyz += spiral3(sin(sin(mpos.xyz)), reso, radius, angle, center);\n\n      pos.xyz = rotateQ(normalize(mpos.xyz * sin(mpos + time)), mod(time * 0.0065, 1.0)) * pos.xyz;\n      pos.xyz = rotateQ(normalize(vec3(1.0)), mod(time * 0.0065, 1.0)) * pos.xyz;\n\n      pos.xyz = rotateQ(normalize(vec3(0.0, 1.0, 0.0)), mod(time * 0.0065, 1.0)) * pos.xyz;\n\n\n    } else if (mode == 8.0) {\n      float scaler = 1.0 / 350.0 * 3.14159264 * 2.0;\n      vec3 mpos = pos.xyz * scaler;\n\n\n      vec3 reso = vec3(1.0, 1.0, 1.0);\n      float radius = 20.0;\n      float angle = 12.0;\n      vec3 center = vec3(0.0);\n\n      float az = 0.0;\n      float el = 0.0;\n      vec3 noiser = vec3(mpos.xyz);\n      toBall(noiser, az, el);\n\n      az += sin(time + rand(pos.xy) * cos(time));\n      el += cos(time + rand(pos.xy) * sin(time));\n\n      pos.xyz += fromBall(0.1, az, el);\n\n      pos.xyz = rotateQ(normalize(mpos.xyz * sin(mpos + time)), mod(time * 0.0065, 1.0)) * pos.xyz;\n      pos.xyz = rotateQ(normalize(vec3(1.0)), mod(time * 0.0065, 1.0)) * pos.xyz;\n\n\n    } else if (mode == 9.0) {\n\n      //\n      float scaler = 1.0 / 350.0 * 3.14159264 * 2.0;\n      vec3 mpos = pos.xyz * scaler;\n\n      vec3 reso = vec3(1.0, 1.0, 1.0);\n      float radius = 20.0;\n      float angle = 12.0;\n      vec3 center = vec3(0.0);\n\n      float az = uv.x;\n      float el = uv.y;\n\n      toBall(mpos.xyz, az, el);\n      pos.xyz = fromBall(350.0, az, el);\n\n      float mytime = abs(sin(pos.x + pos.z + pos.y + time * 5.0)) * 3.141592;\n\n      az += sin(mytime + rand(time + pos.xy) + time);\n      el += cos(mytime + rand(time + pos.yz) + time);\n\n      // pos.xyz += fromBall(2.0, az, el);\n      // pos.xyz = fromBall(350.0, az, el);\n\n      pos.xyz = rotateQ(normalize(mpos.xyz * sin(mpos + mod(mytime, 1.0))), mod(mytime * 0.0065, 1.0)) * pos.xyz;\n      pos.xyz = rotateQ(normalize(vec3(1.0)), mod(mytime * 0.0065, 1.0)) * pos.xyz;\n\n      // pos.xyz += fromBall(3.1, cos(az), sin(el));\n      // pos.xyz = rotateQ(normalize(vec3(1.0)), mod(time * 0.0065 * 0.1, 1.0)) * pos.xyz;\n\n      // pos.xyz = rotateQ(normalize(mpos.xyz * sin(mpos + time * 0.25)), mod(time * 0.0065 * 0.5, 1.0)) * pos.xyz;\n\n      // pos.xyz = pos.xyz;\n      // pos.xyz = vec3(uv.xy, 0.0);\n\n      //\n    }\n\n\n  }\n\n\n  // pos.rgb += vec3(rotateQ(vec3(time * 50.0)), (vec3(pos.rgb)));\n\n  pos.rgb = rotateZ(0.05) * pos.rgb;\n\n  gl_FragColor = pos;\n  pos.w = 1.0;\n\n}\n",p);m.material.uniforms.tIdx={value:s},m.material.uniforms.iTime={value:0},m.material.uniforms.mousePos={value:new j(0,0,0)},m.material.uniforms.screen={value:new j(window.innerWidth,window.innerHeight,0)},m.material.uniforms.enterCirlce={value:0},new j,o.setVariableDependencies(m,[m]);var y=o.init();null!==y&&console.error(y);var x=new S(1,0),b=new C;b.setAttribute("position",x.attributes.position),b.instanceCount=16384,b.setAttribute("uvinfo",new z(new Float32Array(function(){for(var e=[],t=0,o=0;o<r;o++)for(var a=0;a<n;a++)e[t+0]=a/n,e[t+1]=o/r,e[t+2]=0,t+=3;return e}()),3,!0,1));var T={color:{value:new d("#58519B").offsetHSL(0,0,0)},time:{value:0},tPos:{value:null}},P=new G({transparent:!0,uniforms:T,defines:{resolution:"vec2(".concat(n.toFixed(1),", ").concat(r.toFixed(1),")")},vertexShader:"\n    uniform  sampler2D tPos;\n    #include <common>\n    // uniform sampler2D tIdx;\n\n    varying vec3 v_tt;\n\n    attribute vec3 uvinfo;\n\n    void main() {\n      // vec3 newPos = vec3(1.0);\n\n      // position is changed to host uv vals\n      vec4 tt = texture2D(tPos, uvinfo.xy);\n      // vec4 idx = texture2D(tIdx, position.xy);\n\n      v_tt = normalize(tt.xyz);\n\n      vec4 mvPosition = modelViewMatrix * (vec4(tt.rgb + position * 3.0, 1.0));\n      vec4 outputPos = projectionMatrix * mvPosition;\n\n      gl_Position = outputPos;\n    }\n    ",fragmentShader:"\n    #include <common>\n\n    varying vec3 v_tt;\n\n    uniform vec3 color;\n\n    void main () {\n      gl_FragColor = vec4(\n        vec3(color.x + 0.2 * (v_tt.x),\n        color.y + 0.2 * (v_tt.y),\n        color.z + 0.2 * (v_tt.z))  *3.0  + 0.3\n        ,\n        0.35\n      );\n\n      // if (length(gl_PointCoord.xy - 0.5) <= 0.5) {\n\n      // } else {\n      //   discard;\n      // }\n    }\n\n    "}),_=new E(b,P);_.frustumCulled=!1,_.scale.setScalar(1/350*50),_.userData.enableBloom=!0,_.visible=!0,this.add(_),this.core.onClean((function(){_.removeFromParent()}));var A={texture:o.getCurrentRenderTarget(m).texture};this.core.onClean((function(){o.getCurrentRenderTarget(m).texture.dispose(),o.getAlternateRenderTarget(m).texture.dispose()})),this.core.onLoop((function(e){var t=window.performance.now()/1e3;m.material.uniforms.iTime.value=t,T.tPos.value=o.getCurrentRenderTarget(m).texture,T.time.value=t,A.texture=T.tPos.value,o.compute()}));var L=new Ce({gl:this.gl,node:this.core,getHeadList:function(){return A.texture},howManyTrackers:128,tailLength:64});L.o3d.scale.setScalar(1/350*50),this.add(L.o3d),this.core.onClean((function(){e.remove(L.o3d)})),this.core.onLoop((function(e){L.track({trackers:[],lerp:1,dt:e})}))}}])&&Ie(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(k);function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function He(){return React.createElement(React.Fragment,null,React.createElement("group",null,React.createElement("group",{position:[0,0,0],scale:.01},React.createElement(Ue,null))))}function qe(){var e=o((function(e){return e.openOverlay})),t=o((function(e){return e.text}));return React.createElement(React.Fragment,null,e&&React.createElement(React.Fragment,null,React.createElement("div",{style:{position:"absolute",top:"0%",right:"0%",width:"100%",height:"100%"},onClick:function(){o.setState({openOverlay:!1})}}),React.createElement("div",{className:"shadow-2xl backdrop-blur-lg p-1 text-white rounded-2xl",style:{position:"absolute",top:"5%",right:"25%",width:"calc(50% + 0.75rem * 2)",height:"calc(10% + 0.75rem * 2)",border:"1px solid #888",boxShadow:"0px 0px 30px 0px #888"}},React.createElement("textarea",{className:"bg-transparent h-full p-3 w-full block text-white appearance-none bg-opacity-0 border-none outline-none focus:outline-none ",defaultValue:t,style:{background:"transparent",appearance:"none",resize:"none",outline:"none"},onChange:function(e){o.setState({text:e.target.value})}}))))}function We(e){var t,n,r=e.children,a=e.baseURL,s=e.preloader,l=void 0===s?null:s,u=e.onReady,f=void 0===u?function(){}:u,p=(t=c(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ve(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=p[0],v=p[1];return i((function(){a&&o.getState().setBaseURL({baseURL:a}),new Promise((function(e){e()})).then((function(){f(),v(!0)}))}),[a,f]),h?r:l}})();var o=r.pJ,a=r.r_,i=r.dm;export{o as HTMLOverlay,a as Runtime,i as SmartObject};